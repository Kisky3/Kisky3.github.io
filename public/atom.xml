<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Xiang Yu&#39;s Blog</title>
  
  <subtitle>Hello World, Hello Programming!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://kisky3.github.io/"/>
  <updated>2020-06-03T00:31:35.552Z</updated>
  <id>https://kisky3.github.io/</id>
  
  <author>
    <name>Xiang Yu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Setting Vue CLI Modes and Environment Variables</title>
    <link href="https://kisky3.github.io/2020/03/03/SettingVueCLI-env/"/>
    <id>https://kisky3.github.io/2020/03/03/SettingVueCLI-env/</id>
    <published>2020-03-03T10:15:13.000Z</published>
    <updated>2020-06-03T00:31:35.552Z</updated>
    
    <content type="html"><![CDATA[<p>设置Vue CLI的模式和环境变量</p><a id="more"></a><p>基本上参照官方文档设定就好 <a href="https://cli.vuejs.org/guide/mode-and-env.html#modes" target="_blank" rel="noopener">Vue 官方文档</a></p><hr><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><ul><li>Vue CLI: 3.6.3</li></ul><hr><h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h3><p>本回创建本地local环境，开发环境，和生产环境</p><hr><h3 id="env文件的生成"><a href="#env文件的生成" class="headerlink" title=".env文件的生成"></a>.env文件的生成</h3><ul><li>.env.local</li><li>.env.development</li><li>.env.prod<br>在创建好的每个文件下写入相应的API Base URL.<br>本地环境的情况下 <code>.local</code>最好在.gitignore里添加，不要push到生产环境里。<br><code>VUE_APP_</code>这个接头词是必要的，漏掉的话build不成功的。。(之前卡在这了)</li></ul><p>例：<br>.env.local</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=&apos;local&apos;</span><br><span class="line">VUE_APP_API_BASE_URL=&apos;https://localhost:8080/api/v1/xxx&apos;</span><br></pre></td></tr></table></figure><p>.env.development</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=&apos;development&apos;</span><br><span class="line">VUE_APP_API_BASE_URL=&apos;https://development/api/v1/xxx&apos;</span><br></pre></td></tr></table></figure><p>.env.prod</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NODE_ENV=&apos;production&apos;</span><br><span class="line">VUE_APP_API_BASE_URL=&apos;https://production/api/v1/xxx&apos;</span><br></pre></td></tr></table></figure><hr><h3 id="package-json的设定"><a href="#package-json的设定" class="headerlink" title="package.json的设定"></a>package.json的设定</h3><p>在package.json里的scripts里设定你的模式</p><p>例：<br>package.json</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;local-serve&quot;: &quot;vue-cli-service serve --mode local&quot;,</span><br><span class="line">    &quot;dev-serve&quot;: &quot;vue-cli-service serve --mode development&quot;,</span><br><span class="line">    &quot;prod-serve&quot;: &quot;vue-cli-service serve --mode production&quot;,</span><br><span class="line">    &quot;dev-build&quot;: &quot;vue-cli-service build --mode development&quot;,</span><br><span class="line">    &quot;prod-build&quot;: &quot;vue-cli-service build --mode production&quot;,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><hr><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>根据你设定的package.json来运行<br>比如 yarn local-serve的时候，就会相应的获取.env.local里的环境变量。</p><p>这样你就能够根据不同的开发环境进行build,deploy了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;设置Vue CLI的模式和环境变量&lt;/p&gt;
    
    </summary>
    
      <category term="System Setting" scheme="https://kisky3.github.io/categories/System-Setting/"/>
    
    
      <category term="setting" scheme="https://kisky3.github.io/tags/setting/"/>
    
      <category term="Vue CLI" scheme="https://kisky3.github.io/tags/Vue-CLI/"/>
    
      <category term="Environment Variables" scheme="https://kisky3.github.io/tags/Environment-Variables/"/>
    
  </entry>
  
  <entry>
    <title>Create a Anonymous Bot for Slack</title>
    <link href="https://kisky3.github.io/2020/02/28/slackanonymousbot/"/>
    <id>https://kisky3.github.io/2020/02/28/slackanonymousbot/</id>
    <published>2020-02-28T14:50:23.000Z</published>
    <updated>2020-06-03T00:06:29.697Z</updated>
    
    <content type="html"><![CDATA[<p>做一个可以在slack匿名发言的机器人</p><a id="more"></a><p>运行环境</p><ul><li>Ubuntu16.04</li><li>node.js</li></ul><p>完成后的示意图<br><img src="./1.png" style="width:400px;margin:40px 0"></p><h3 id="添加Bot"><a href="#添加Bot" class="headerlink" title="添加Bot"></a>添加Bot</h3><p>首先点击下面的link在slack里添加bot</p><p><a href="https://my.slack.com/services/new/bot" target="_blank" rel="noopener">https://my.slack.com/services/new/bot</a></p><p>这里用了<code>anonymous</code>的bot名字，也可以输入其他的，然后点击「Add bot integration」按钮。</p><img src="./2.png" style="width:500px;margin:40px 0"><p>然后记下画面上显示的 「API Token」</p><h3 id="获取频道ID"><a href="#获取频道ID" class="headerlink" title="获取频道ID"></a>获取频道ID</h3><p><a href="https://slack.com/api/conversations.list?token=刚刚记录下的API_Token" target="_blank" rel="noopener">https://slack.com/api/conversations.list?token=刚刚记录下的API_Token</a></p><p>还可以取得用户ID和非公开频道ID</p><hr><h3 id="安装Botkit"><a href="#安装Botkit" class="headerlink" title="安装Botkit"></a>安装Botkit</h3><p>安装并使用Slack官方文档上的Bot框架<a href="https://github.com/howdyai/botkit" target="_blank" rel="noopener">Botkit</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//创建路径</span><br><span class="line">$ cd ~</span><br><span class="line">$ mkdir slack_anonymous_bot </span><br><span class="line">$ cd slack_anonymous_bot</span><br><span class="line"></span><br><span class="line">//botkit clone</span><br><span class="line">$ git clone https://github.com/howdyai/botkit.git</span><br><span class="line">$ cd botkit</span><br><span class="line"></span><br><span class="line">//branch 移动</span><br><span class="line">$ git checkout origin/legacy </span><br><span class="line"></span><br><span class="line">//安装</span><br><span class="line">$ npm install</span><br><span class="line"></span><br><span class="line">//如果安装失败・・・</span><br><span class="line">$ npm audit fix</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>如果生成了~/botkit/example/slack_bot.js就说明成功了</p><hr><h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 移动到你生成的路径</span><br><span class="line">$ cd ~</span><br><span class="line">$ cd slack_anonymous_bot/botkit/</span><br><span class="line"></span><br><span class="line">//制作anonymous_bot.js</span><br><span class="line">$ touch anonymous_bot.js</span><br></pre></td></tr></table></figure><p>在anonymous_bot.js里粘贴下面的代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">var Botkit = require(&quot;./lib/Botkit.js&quot;); // 注意path</span><br><span class="line">var os = require(&quot;os&quot;);</span><br><span class="line"></span><br><span class="line">var controller = Botkit.slackbot(&#123;</span><br><span class="line">    debug: true,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var bot = controller.spawn(&#123;</span><br><span class="line">    token: &quot;刚刚记录下的API_TOKEN&quot;</span><br><span class="line">&#125;).startRTM();</span><br><span class="line"></span><br><span class="line">controller.on(&quot;direct_message&quot;, (bot, message) =&gt; &#123;</span><br><span class="line">    var now = new Date(); //获取时间</span><br><span class="line">    var user_name = &quot;名無しさん: &quot;+ now.getFullYear()+&quot;/&quot;+(now.getMonth()+1)+&quot;/&quot;+now.getDate()+&quot;/ &quot;+now.getHours()+&quot;:&quot;+now.getMinutes()+&quot;:&quot;+now.getSeconds();</span><br><span class="line"></span><br><span class="line">    bot.reply(message, &quot;匿名で投稿しました．&quot;);</span><br><span class="line"></span><br><span class="line">    bot.startConversation(&#123;  channel : &quot;刚刚取得的频道ID&quot; &#125;, (err, convo) =&gt; &#123;</span><br><span class="line">        var send_message = &#123;</span><br><span class="line">          type: &quot;message&quot;,</span><br><span class="line">          channel: &quot;刚刚取得的频道ID&quot;,</span><br><span class="line">          text: message.text,</span><br><span class="line">          username: user_name,</span><br><span class="line">          thread_ts: null,</span><br><span class="line">          reply_broadcast: null,</span><br><span class="line">          parse: null,</span><br><span class="line">          link_names: null,</span><br><span class="line">          attachments: null,</span><br><span class="line">          unfurl_links: null,</span><br><span class="line">          unfurl_media: null,</span><br><span class="line">          icon_url: null,</span><br><span class="line">          icon_emoji: &quot;:robot_face:&quot;,</span><br><span class="line">          as_user: true</span><br><span class="line">        &#125;</span><br><span class="line">        convo.say(send_message);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//debug环境</span><br><span class="line">$ cd ~/slack_anonymous_bot/botkit</span><br><span class="line">$ node anonymous_bot.js</span><br><span class="line"></span><br><span class="line">//通常一般环境</span><br><span class="line">$ cd ~/slack_anonymous_bot/botkit</span><br><span class="line">$ forever start slack_bot.js</span><br><span class="line">$ forever stop slack_bot.js // 停止bot</span><br></pre></td></tr></table></figure><hr><h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p>如果bot运行成功了，bot前的灯会变绿色。<br><img src="./4.png" style="width:300px;margin:40px 0"></p><p>投稿时候首先会给你回信<br><img src="./5.png" style="width:300px;margin:40px 0"></p><p>然后你就可以看到匿名bot在你登陆的频道里代表你发言了<br><img src="./6.png" style="width:300px;margin:40px 0"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;做一个可以在slack匿名发言的机器人&lt;/p&gt;
    
    </summary>
    
      <category term="System Setting" scheme="https://kisky3.github.io/categories/System-Setting/"/>
    
    
      <category term="setting" scheme="https://kisky3.github.io/tags/setting/"/>
    
      <category term="slack bot" scheme="https://kisky3.github.io/tags/slack-bot/"/>
    
      <category term="slack" scheme="https://kisky3.github.io/tags/slack/"/>
    
      <category term="AnonymousBot" scheme="https://kisky3.github.io/tags/AnonymousBot/"/>
    
      <category term="BotKit" scheme="https://kisky3.github.io/tags/BotKit/"/>
    
  </entry>
  
  <entry>
    <title>Use ServerlessFramework To Create REST API</title>
    <link href="https://kisky3.github.io/2020/02/10/UseServerlessFrameworkToCreateRESTAPI/"/>
    <id>https://kisky3.github.io/2020/02/10/UseServerlessFrameworkToCreateRESTAPI/</id>
    <published>2020-02-10T12:03:52.000Z</published>
    <updated>2020-04-18T09:22:32.357Z</updated>
    
    <content type="html"><![CDATA[<p>使用serverless框架创建REST API</p><a id="more"></a><h3 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h3><ul><li>node.js (npm) v4以上</li><li>awsアカウント</li><li>awscli</li></ul><p>使用下面的command确认环境</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br><span class="line">v4.3.2</span><br><span class="line">$ aws --version</span><br><span class="line">aws-cli/1.11.44 Python/2.7.10 Darwin/16.4.0 botocore/1.5.7</span><br></pre></td></tr></table></figure><hr><h3 id="安装Serverless-Framework"><a href="#安装Serverless-Framework" class="headerlink" title="安装Serverless Framework"></a>安装Serverless Framework</h3><p>首先从npm开始安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g serverless</span><br></pre></td></tr></table></figure><p>安装完成后进行版本确认</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">serverless -v</span><br><span class="line">Framework Core: 1.63.0</span><br><span class="line">Plugin: 3.3.0</span><br><span class="line">SDK: 2.3.0</span><br><span class="line">Components Core: 1.1.2</span><br><span class="line">Components CLI: 1.4.0</span><br></pre></td></tr></table></figure><h3 id="关于Serveless-Application的构成"><a href="#关于Serveless-Application的构成" class="headerlink" title="关于Serveless Application的构成"></a>关于Serveless Application的构成</h3><p>Serveless Application主要分为<strong>有各种方法(你所想运行的代码块)的文件</strong>和<strong>云端(AWS)设定文件</strong></p><hr><h3 id="设置AWS-Credentials"><a href="#设置AWS-Credentials" class="headerlink" title="设置AWS Credentials"></a>设置AWS Credentials</h3><p>首先要设置能使用Serveless Framework的IAM</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用serverless框架创建REST API&lt;/p&gt;
    
    </summary>
    
      <category term="Back-end Knowledge" scheme="https://kisky3.github.io/categories/Back-end-Knowledge/"/>
    
    
      <category term="serverlessframework" scheme="https://kisky3.github.io/tags/serverlessframework/"/>
    
      <category term="aws" scheme="https://kisky3.github.io/tags/aws/"/>
    
      <category term="restAPI" scheme="https://kisky3.github.io/tags/restAPI/"/>
    
  </entry>
  
  <entry>
    <title>Install AWS CLI On macOS</title>
    <link href="https://kisky3.github.io/2020/02/08/InstallAwsCLIOnMacOS/"/>
    <id>https://kisky3.github.io/2020/02/08/InstallAwsCLIOnMacOS/</id>
    <published>2020-02-08T11:54:37.000Z</published>
    <updated>2020-04-18T09:22:32.279Z</updated>
    
    <content type="html"><![CDATA[<p>在 macOS 上安装 AWS CLI 版本 1</p><a id="more"></a><p>1.先决条件<br>Python 2 版本 2.7+ 或 Python 3 版本 3.4+</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python --version</span><br></pre></td></tr></table></figure><hr><p>2.使用捆绑安装程序安装 AWS CLI 版本 1<br>如果没有 unzip，请使用您喜欢的程序包管理器或等效工具进行安装。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl &quot;https://s3.amazonaws.com/aws-cli/awscli-bundle.zip&quot; -o &quot;awscli-bundle.zip&quot;</span><br><span class="line">unzip awscli-bundle.zip</span><br><span class="line">sudo ./awscli-bundle/install -i /usr/local/aws -b /usr/local/bin/aws</span><br></pre></td></tr></table></figure><hr><p>3.运行安装程序。该命令将 AWS CLI 安装到 /usr/local/aws，<br>并在 /usr/local/bin 目录中创建符号链接 aws。使用 -b 选项创建符号链接将免除在用户的 $PATH 变量中指定安装目录的需要。这应该能让所有用户在任何目录下通过键入 aws 来调用 AWS CLI。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./awscli-bundle/install -i /usr/local/aws -b /usr/local/bin/aws</span><br></pre></td></tr></table></figure><hr><p>4.查看是否安装成功</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws --version</span><br></pre></td></tr></table></figure><hr><p>参考<br><a href="https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/install-macos.html#awscli-install-osx-pip" target="_blank" rel="noopener">AWS官方文档</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 macOS 上安装 AWS CLI 版本 1&lt;/p&gt;
    
    </summary>
    
      <category term="Back-end Knowledge" scheme="https://kisky3.github.io/categories/Back-end-Knowledge/"/>
    
    
      <category term="awsCLI" scheme="https://kisky3.github.io/tags/awsCLI/"/>
    
      <category term="install" scheme="https://kisky3.github.io/tags/install/"/>
    
  </entry>
  
  <entry>
    <title>npm Error</title>
    <link href="https://kisky3.github.io/2020/02/08/npmError/"/>
    <id>https://kisky3.github.io/2020/02/08/npmError/</id>
    <published>2020-02-08T07:14:59.000Z</published>
    <updated>2020-04-18T09:22:32.483Z</updated>
    
    <content type="html"><![CDATA[<p> 常见npm错误</p><a id="more"></a><h3 id="npm-install-error"><a href="#npm-install-error" class="headerlink" title="npm install error"></a>npm install error</h3><p>在npm install时候发生error的话可以检查以下：</p><p><strong>1.是否存在package.json,因为npm安装的时候是根据package.json获取相应包的。没有源文件的话就无法获取资源。</strong></p><hr><p><strong>2.在有package.json的情况下有可能是重复多次安装npm，导致冲突。</strong><br>可以尝试以下步骤后再次安装。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 删除原先安装好的node_modules</span><br><span class="line">rm -rf node_modules</span><br><span class="line"></span><br><span class="line">// 清楚缓存</span><br><span class="line">npm cache clean --force</span><br><span class="line"></span><br><span class="line">// 更新npm</span><br><span class="line">npm update -g npm</span><br><span class="line"></span><br><span class="line">// 卸载npm</span><br><span class="line">npm uninstall npm -g</span><br></pre></td></tr></table></figure><hr><p><strong>3.当出现以下error的时候说明端口被占用,可以修改端口或者kill其他占用此端口的程序。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&gt; frontend@1.0.0 dev /Users/apple/Desktop/vue-s3-dropzone/frontend</span><br><span class="line">&gt; node build/dev-server.js</span><br><span class="line"></span><br><span class="line">events.js:174</span><br><span class="line">      throw er; // Unhandled &apos;error&apos; event</span><br><span class="line">      ^</span><br><span class="line"></span><br><span class="line">Error: listen EADDRINUSE: address already in use :::8080</span><br><span class="line">    at Server.setupListenHandle [as _listen2] (net.js:1279:14)</span><br><span class="line">    at listenInCluster (net.js:1327:12)</span><br><span class="line">    at Server.listen (net.js:1414:7)</span><br><span class="line">    at Function.listen (/Users/apple/Desktop/vue-s3-dropzone/frontend/node_modules/express/lib/application.js:617:24)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/Users/apple/Desktop/vue-s3-dropzone/frontend/build/dev-server.js:60:22)</span><br><span class="line">    at Module._compile (internal/modules/cjs/loader.js:776:30)</span><br><span class="line">    at Object.Module._extensions..js (internal/modules/cjs/loader.js:787:10)</span><br><span class="line">    at Module.load (internal/modules/cjs/loader.js:653:32)</span><br><span class="line">    at tryModuleLoad (internal/modules/cjs/loader.js:593:12)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:585:3)</span><br><span class="line">    at Function.Module.runMain (internal/modules/cjs/loader.js:829:12)</span><br><span class="line">    at startup (internal/bootstrap/node.js:283:19)</span><br><span class="line">    at bootstrapNodeJSCore (internal/bootstrap/node.js:622:3)</span><br><span class="line">Emitted &apos;error&apos; event at:</span><br><span class="line">    at emitErrorNT (net.js:1306:8)</span><br><span class="line">    at process._tickCallback (internal/process/next_tick.js:63:19)</span><br><span class="line">    at Function.Module.runMain (internal/modules/cjs/loader.js:832:11)</span><br><span class="line">    at startup (internal/bootstrap/node.js:283:19)</span><br><span class="line">    at bootstrapNodeJSCore (internal/bootstrap/node.js:622:3)</span><br><span class="line">npm ERR! code ELIFECYCLE</span><br><span class="line">npm ERR! errno 1</span><br><span class="line">npm ERR! frontend@1.0.0 dev: `node build/dev-server.js`</span><br><span class="line">npm ERR! Exit status 1</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! Failed at the frontend@1.0.0 dev script.</span><br><span class="line">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     /Users/apple/.npm/_logs/2020-02-08T07_13_59_039Z-debug.log</span><br></pre></td></tr></table></figure><hr><p><strong>4.有可能在安装时候包丢失，可以修复一下</strong><br>Error:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">return (new fsevents(path)).on(&apos;fsevent&apos;, callback).start(); ^</span><br><span class="line"></span><br><span class="line">TypeError: fsevents is not a constructor at createFSEventsInstance (/Users/nannam/test-app-2/node_modules/chokidar/lib/fsevents-handler.js:28:11) at setFSEventsListener (/Users/nannam/test-app-2/node_modules/chokidar/lib/fsevents-handler.js:82:16) at FSWatcher.FsEventsHandler._watchWithFsEvents (/Users/nannam/test-app-2/node_modules/chokidar/lib/fsevents-handler.js:252:16) at FSWatcher. (/Users/nannam/test-app-2/node_modules/chokidar/lib/fsevents-handler.js:386:25) at LOOP (fs.js:1565:14) at process._tickCallback (internal/process/next_tick.js:61:11) error Command failed with exit code 1. info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.</span><br></pre></td></tr></table></figure><p>解决方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm audit fix --force</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; 常见npm错误&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="npm" scheme="https://kisky3.github.io/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>Vue VeeValidation Sample</title>
    <link href="https://kisky3.github.io/2020/01/30/VeeValidation/"/>
    <id>https://kisky3.github.io/2020/01/30/VeeValidation/</id>
    <published>2020-01-30T08:57:50.000Z</published>
    <updated>2020-04-18T09:22:32.357Z</updated>
    
    <content type="html"><![CDATA[<p>Vue的表单验证组件 VeeValidation</p><a id="more"></a><h3 id="1-安装VeeValidation"><a href="#1-安装VeeValidation" class="headerlink" title="1. 安装VeeValidation"></a>1. 安装VeeValidation</h3><p>从npm安装VeeValidation<br>官网： <a href="https://logaretm.github.io/vee-validate/guide/basics.html" target="_blank" rel="noopener">VeeValidation</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install vee-validate --save</span><br></pre></td></tr></table></figure><hr><h3 id="2-VeeValidation进行验证"><a href="#2-VeeValidation进行验证" class="headerlink" title="2. VeeValidation进行验证"></a>2. VeeValidation进行验证</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; extend, ValidationProvider, ValidationObserver &#125; <span class="keyword">from</span> <span class="string">"vee-validate"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; required &#125; <span class="keyword">from</span> <span class="string">"vee-validate/dist/rules"</span>;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section <span class="class"><span class="keyword">class</span></span>=<span class="string">"section"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"columns is-mobile"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"field"</span>&gt;</span><br><span class="line">        &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"label"</span>&gt;テキストフォーム&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div class="control"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;validation-provider v-slot="&#123; errors &#125;" rules="required" name="テキスト項目"&gt;</span></span><br><span class="line"><span class="regexp">             &lt;input v-model="textValue" class="input" type="text" placeholder="Text input" /</span>&gt;</span><br><span class="line">             &lt;p v-show=<span class="string">"errors.length"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"help is-danger"</span>&gt;</span><br><span class="line">               &#123;&#123; errors[<span class="number">0</span>] &#125;&#125;</span><br><span class="line">             &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">           &lt;/</span>validation-provider&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>section&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import Card from '~/</span>components/Card<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">  name: '</span>HomePage<span class="string">',</span></span><br><span class="line"><span class="string">  data () &#123;</span></span><br><span class="line"><span class="string">    return &#123;</span></span><br><span class="line"><span class="string">      textValue: '</span><span class="string">'</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>写出来是这样子:<br><img src="./1.png" style="width:300px"></p><hr><h3 id="3-所有的验证通过之前限制送信"><a href="#3-所有的验证通过之前限制送信" class="headerlink" title="3. 所有的验证通过之前限制送信"></a>3. 所有的验证通过之前限制送信</h3><p>实际的表单里有很多输入项目，对各个输入项进行验证的话，要使用<strong>ValidationObserver</strong>,还可以利用它使所有的验证通过之前，设定送信按钮无效。<br>pages/form.vue</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section <span class="class"><span class="keyword">class</span></span>=<span class="string">"section"</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"columns is-mobile"</span>&gt;</span><br><span class="line">      &lt;validation-observer v-slot=<span class="string">"&#123; invalid &#125;"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"field"</span>&gt;</span><br><span class="line">        &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"label"</span>&gt;お名前&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div class="control"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;text-field-with-validation v-model="textValue" rules="required" fieldname="お名前" /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"field"</span>&gt;</span><br><span class="line">        &lt;label <span class="class"><span class="keyword">class</span></span>=<span class="string">"label"</span>&gt;メールアドレス&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div class="control"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;text-field-with-validation v-model="emailValue" rules="required|email" fieldname="メールアドレス" /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"field"</span>&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"control"</span>&gt;</span><br><span class="line">            &lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">"button is-link"</span> :disabled=<span class="string">"invalid"</span>&gt;送信する&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;p v-show="invalid" class="help is-danger"&gt;</span></span><br><span class="line"><span class="regexp">             全ての必須項目を入力すると「新規追加」ボタンが有効化されます。</span></span><br><span class="line"><span class="regexp">            &lt;/</span>p&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/validation-observer&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/section&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> TextFieldWithValidation <span class="keyword">from</span> <span class="string">'@/components/TextFieldWithValidation'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'HomePage'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    TextFieldWithValidation</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      textValue: <span class="string">''</span>,</span><br><span class="line">      emailValue: <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>重要的point是：<br>在<strong><validation-observer v-slot="{ invalid }"></validation-observer></strong>和<strong></strong>之间的表单项目都在VeeValidation的监视下，<br>如果有没有通过验证的项目的话<strong>invalid</strong>为true,给提交按钮加上<strong>:disabled=”invalid”</strong>限制的话就可设置成无效状态了。</p><p>另外像邮件地址的表单的话，<strong>rules=”required|email”</strong>在这里就是加了两个规则<strong>required（必填验证）</strong>和<strong>email（邮件格式验证）</strong>，<br>像这样用<strong>|</strong>隔开的话就可以设定复数的规则。</p><hr><h3 id="送信时首先进行表单全体验证"><a href="#送信时首先进行表单全体验证" class="headerlink" title="送信时首先进行表单全体验证"></a>送信时首先进行表单全体验证</h3><p>在验证没有全通过的时候，想自行定义操作处理的话，使用<strong>this.$refs.observer.validate()</strong>来进行表单的再次验证。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;validation-observer ref=<span class="string">"observer"</span> v-slot=<span class="string">"&#123; invalid &#125;"</span> tag=<span class="string">"form"</span> @submit.prevent=<span class="string">"submit()"</span>&gt;</span><br><span class="line">      &lt;text-field-<span class="keyword">with</span>-validation rules=<span class="string">"required"</span> v-model=<span class="string">"first"</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;text-field-<span class="keyword">with</span>-validation rules=<span class="string">"required"</span> v-model=<span class="string">"second"</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;button :disabled=<span class="string">"invalid"</span>&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>validation-observer&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">  methods: &#123;</span></span><br><span class="line"><span class="regexp">    async submit () &#123;</span></span><br><span class="line"><span class="regexp">      const isValid = await this.$refs.observer.validate();</span></span><br><span class="line"><span class="regexp">      if (!isValid) &#123;</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ バリデーションが通る前に送信ボタンがクリックされた場合の処理</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">       /</span><span class="regexp">/ バリデーションが通っている状態で送信ボタンがクリックされた場合の処理</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vue的表单验证组件 VeeValidation&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="Vue" scheme="https://kisky3.github.io/tags/Vue/"/>
    
      <category term="Validation" scheme="https://kisky3.github.io/tags/Validation/"/>
    
      <category term="VeeValidation" scheme="https://kisky3.github.io/tags/VeeValidation/"/>
    
      <category term="ValidationObserver" scheme="https://kisky3.github.io/tags/ValidationObserver/"/>
    
      <category term="ValidationProvider" scheme="https://kisky3.github.io/tags/ValidationProvider/"/>
    
  </entry>
  
  <entry>
    <title>Setting Vuex Namespace</title>
    <link href="https://kisky3.github.io/2020/01/30/VueNameSpace/"/>
    <id>https://kisky3.github.io/2020/01/30/VueNameSpace/</id>
    <published>2020-01-30T07:23:41.000Z</published>
    <updated>2020-04-18T09:22:32.358Z</updated>
    
    <content type="html"><![CDATA[<p>Vuex命名空间的设定</p><a id="more"></a><p>Vuex 2.1开始Store的module划分就变得简单了，追加<strong>namespace:true</strong>就可以自动划分命名空间了。</p><p>追加了这个选项之后，<strong>state</strong>，<strong>getters</strong>，<strong>actions</strong>，<strong>mutations</strong>就会自动地被划分到和自己所属的module名（下面的例子里module名就是helloModule）同名的命名空间里。</p><p>modules/hello/index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> helloModule = &#123;</span><br><span class="line">  namespaced: <span class="literal">true</span>, <span class="comment">// 追加</span></span><br><span class="line">  state: &#123;</span><br><span class="line">    hello: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    <span class="comment">// 方法名</span></span><br><span class="line">    hello(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.hello</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="comment">// 方法名</span></span><br><span class="line">    sayHello(context, payload) &#123;</span><br><span class="line">      api.sayHello()</span><br><span class="line">        .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// 方法名</span></span><br><span class="line">    hello(state, payload) &#123;</span><br><span class="line">      state.hello = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>呼出的时候「mapState/mapActions参数传递命名空间」的形式也可以。<br>还可以使用明确指明命名空间的形式。</p><h3 id="引用方：使用参数传递命名空间"><a href="#引用方：使用参数传递命名空间" class="headerlink" title="引用方：使用参数传递命名空间"></a>引用方：使用参数传递命名空间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(<span class="string">'helloModule'</span>, <span class="comment">// ← 参数传递命名空间</span></span><br><span class="line">    <span class="comment">// 在这里state并不是根state、而是被自动识别为helloModule/state的命名空间</span></span><br><span class="line">    &#123;  </span><br><span class="line">      hello: <span class="function"><span class="params">state</span> =&gt;</span> state.hello</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions(<span class="string">'helloModule'</span>, <span class="comment">//← 参数传递命名空间</span></span><br><span class="line">    <span class="comment">// this.sayHello() 是 this.$store.dispatch('helloModule/sayHello')的映射</span></span><br><span class="line">    [<span class="string">'sayHello'</span>]</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="明确指定命名空间"><a href="#明确指定命名空间" class="headerlink" title="明确指定命名空间"></a>明确指定命名空间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    hello: <span class="function"><span class="params">state</span> =&gt;</span> state.helloModule.hello <span class="comment">// 这个state是全局store。</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions([</span><br><span class="line">    <span class="comment">// this.sayHello() 是this.$store.dispatch('helloModule/sayHello')的映射</span></span><br><span class="line">    <span class="string">'helloModule/sayHello'</span></span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vuex命名空间的设定&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="Vue" scheme="https://kisky3.github.io/tags/Vue/"/>
    
      <category term="form" scheme="https://kisky3.github.io/tags/form/"/>
    
  </entry>
  
  <entry>
    <title>Connect iPhone to Mac localhost Server</title>
    <link href="https://kisky3.github.io/2020/01/25/MacIphoneLocalhost/"/>
    <id>https://kisky3.github.io/2020/01/25/MacIphoneLocalhost/</id>
    <published>2020-01-25T06:43:21.000Z</published>
    <updated>2020-04-18T09:22:32.282Z</updated>
    
    <content type="html"><![CDATA[<p>用iphone连接Mac的Localhost服务器</p><a id="more"></a><p>1.iphone用USB连接Mac</p><p>2.<strong>iphone和Mac连接同一个wifi</strong></p><p>3.Mac ： System Setting =&gt; Network 查看该网络下的ip地址比如192.168.100.xxx</p><p>4.iphone地址栏输入ip地址 + port号即可以预览localhost</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.100.xxx:8080</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;用iphone连接Mac的Localhost服务器&lt;/p&gt;
    
    </summary>
    
      <category term="System Setting" scheme="https://kisky3.github.io/categories/System-Setting/"/>
    
    
      <category term="iPhone" scheme="https://kisky3.github.io/tags/iPhone/"/>
    
      <category term="Localhost" scheme="https://kisky3.github.io/tags/Localhost/"/>
    
  </entry>
  
  <entry>
    <title>Vue Form Component</title>
    <link href="https://kisky3.github.io/2020/01/14/form/"/>
    <id>https://kisky3.github.io/2020/01/14/form/</id>
    <published>2020-01-14T13:51:40.000Z</published>
    <updated>2020-04-18T09:22:32.439Z</updated>
    
    <content type="html"><![CDATA[<p>Vue.js 的表单要素组件化</p><a id="more"></a><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>首先是 input 的组件化。<code>field</code>的值是通过<code>@input</code>来监听变化，并使用<code>$emit</code>的<code>&#39;input&#39;</code>来给父组件的 v-model 传值。<code>updateValue</code>通过参数 e，取得<code>event</code>，并进一步取得<code>target.value</code>,通过<code>emit</code>传值给父组件。</p><p>子组件 MyInput.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:type</span>=<span class="string">"type"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:name</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:value</span>=<span class="string">"value"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:placeholder</span>=<span class="string">"placeholder"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">input</span>=<span class="string">"updateValue"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">"MyInput"</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line"><span class="javascript">    value: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    type: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    name: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    placeholder: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">false</span> &#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    updateValue: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$emit(<span class="string">"input"</span>, e.target.value);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>父组件 App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">MyInput</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"sampleForm.text"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">placeholder</span>=<span class="string">"サンプル"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"sample-input"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">MyInput</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Textarea"><a href="#Textarea" class="headerlink" title="Textarea"></a>Textarea</h3><p>子组件 MyTextarea.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">textarea</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:name</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:value</span>=<span class="string">"value"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:placeholder</span>=<span class="string">"placeholder"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:rows</span>=<span class="string">"rows"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:cols</span>=<span class="string">"cols"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">input</span>=<span class="string">"updateValue"</span></span></span><br><span class="line"><span class="tag">  &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">"MyTextarea"</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line"><span class="javascript">    value: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    name: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    placeholder: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">false</span> &#125;,</span></span><br><span class="line"><span class="javascript">    rows: &#123; <span class="attr">type</span>: <span class="built_in">Number</span>, <span class="attr">required</span>: <span class="literal">false</span> &#125;,</span></span><br><span class="line"><span class="javascript">    cols: &#123; <span class="attr">type</span>: <span class="built_in">Number</span>, <span class="attr">required</span>: <span class="literal">false</span> &#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    updateValue: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$emit(<span class="string">"input"</span>, e.target.value);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>父组件 App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">MyTextarea</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"sampleForm.textarea"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">placeholder</span>=<span class="string">"サンプル"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"sample-textarea"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:rows</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:cols</span>=<span class="string">"50"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">MyTextarea</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Radio-Button"><a href="#Radio-Button" class="headerlink" title="Radio Button"></a>Radio Button</h3><p>子组件 MyRadio</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"(option, index) in options"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"radio"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:name</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:value</span>=<span class="string">"option.value"</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">change</span>=<span class="string">"updateValue"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span>&#123;&#123; option.label &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">"MyRadio"</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line"><span class="javascript">    value: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    options: &#123; <span class="attr">type</span>: <span class="built_in">Array</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    name: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    updateValue: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$emit(<span class="string">"input"</span>, e.target.value);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>父组件 App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 変数optionsには[&#123;label: "hoge", value: "1"&#125;, &#123;label: "fuga", value: "2"&#125;]のようなオブジェクトの配列を設定</span><br><span class="line"><span class="tag">&lt;<span class="name">MyRadio</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"sampleForm.radio"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"sample-radio"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">MyRadio</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h3><p>子组件 select.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">:name</span>=<span class="string">"name"</span> @<span class="attr">change</span>=<span class="string">"updateValue"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"(option, index) in options"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">:value</span>=<span class="string">"option.value"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">          &#123;&#123; option.label &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">"MySelect"</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line"><span class="javascript">    value: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    options: &#123; <span class="attr">type</span>: <span class="built_in">Array</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    name: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    updateValue: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$emit(<span class="string">"input"</span>, e.target.value);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.$emit(<span class="string">"input"</span>, <span class="keyword">this</span>.options[<span class="number">0</span>].value);</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>父组件 App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">```App.vue</span><br><span class="line">// 変数optionsには[&#123;label: "hoge", value: "1"&#125;, &#123;label: "fuga", value: "2"&#125;]のようなオブジェクトの配列を設定</span><br><span class="line"><span class="tag">&lt;<span class="name">MySelect</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"sampleForm.select"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"sample-select"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">MySelect</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Checkbox"><a href="#Checkbox" class="headerlink" title="Checkbox"></a>Checkbox</h3><p>子组件 MyCheckbox.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"(option, index) in options"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">"checkbox"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:name</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:value</span>=<span class="string">"option.value"</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">change</span>=<span class="string">"updateValue"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span>&#123;&#123; option.label &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">"MyCheckbox"</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line"><span class="javascript">    options: &#123; <span class="attr">type</span>: <span class="built_in">Array</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="javascript">    name: &#123; <span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      values: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    updateValue: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line">      if (e.target.checked) &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.values.push(e.target.value);</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.values = <span class="keyword">this</span>.values.filter(<span class="function"><span class="params">v</span> =&gt;</span> v !== e.target.value);</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$emit(<span class="string">"input"</span>, <span class="keyword">this</span>.values);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>父组件 App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 変数optionsには[&#123;label: "hoge", value: "1"&#125;, &#123;label: "fuga", value: "2"&#125;]のようなオブジェクトの配列を設定</span><br><span class="line"><span class="tag">&lt;<span class="name">MyCheckbox</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"sampleForm.checkbox"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"sample-checkbox"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">MyCheckbox</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Form全体"><a href="#Form全体" class="headerlink" title="Form全体"></a>Form全体</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyLabel</span>&gt;</span>InputText<span class="tag">&lt;/<span class="name">MyLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyInput</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"sampleForm.text"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"サンプル"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"sample-input"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">MyInput</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyLabel</span>&gt;</span>TextArea<span class="tag">&lt;/<span class="name">MyLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyTextarea</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"sampleForm.textarea"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"サンプル"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"sample-textarea"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:rows</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:cols</span>=<span class="string">"50"</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">MyTextarea</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyLabel</span>&gt;</span>RadioButton<span class="tag">&lt;/<span class="name">MyLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyRadio</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"sampleForm.radio"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"sample-radio"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">MyRadio</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyLabel</span>&gt;</span>Checkbox<span class="tag">&lt;/<span class="name">MyLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyCheckbox</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"sampleForm.checkbox"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"sample-checkbox"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">MyCheckbox</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyLabel</span>&gt;</span>Select<span class="tag">&lt;/<span class="name">MyLabel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MySelect</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"sampleForm.select"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"sample-select"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:options</span>=<span class="string">"options"</span></span></span><br><span class="line"><span class="tag">      &gt;</span><span class="tag">&lt;/<span class="name">MySelect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">MyBtn</span> @<span class="attr">click</span>=<span class="string">"sendForm"</span>&gt;</span>send<span class="tag">&lt;/<span class="name">MyBtn</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyInput <span class="keyword">from</span> <span class="string">"./components/MyInput"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyTextarea <span class="keyword">from</span> <span class="string">"./components/MyTextarea"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyRadio <span class="keyword">from</span> <span class="string">"./components/MyRadio"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyCheckbox <span class="keyword">from</span> <span class="string">"./components/MyCheckbox"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MySelect <span class="keyword">from</span> <span class="string">"./components/MySelect"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyBtn <span class="keyword">from</span> <span class="string">"./components/MyBtn"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyLabel <span class="keyword">from</span> <span class="string">"./components/MyLabel"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">"app"</span>,</span></span><br><span class="line">  components: &#123;</span><br><span class="line">    MyTextarea,</span><br><span class="line">    MyInput,</span><br><span class="line">    MyRadio,</span><br><span class="line">    MyCheckbox,</span><br><span class="line">    MySelect,</span><br><span class="line">    MyBtn,</span><br><span class="line">    MyLabel</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      sampleForm: &#123;</span><br><span class="line"><span class="javascript">        text: <span class="string">""</span>,</span></span><br><span class="line"><span class="javascript">        radio: <span class="string">""</span>,</span></span><br><span class="line"><span class="javascript">        select: <span class="string">""</span>,</span></span><br><span class="line"><span class="javascript">        textarea: <span class="string">""</span>,</span></span><br><span class="line">        checkbox: []</span><br><span class="line">      &#125;,</span><br><span class="line">      options: [</span><br><span class="line">        &#123;</span><br><span class="line"><span class="javascript">          label: <span class="string">"fizz"</span>,</span></span><br><span class="line"><span class="javascript">          value: <span class="string">"3"</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line"><span class="javascript">          label: <span class="string">"buzz"</span>,</span></span><br><span class="line"><span class="javascript">          value: <span class="string">"5"</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line"><span class="javascript">          label: <span class="string">"fizzBuzz"</span>,</span></span><br><span class="line"><span class="javascript">          value: <span class="string">"15"</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    sendForm() &#123;</span><br><span class="line"><span class="javascript">      <span class="comment">// formデータの送信処理</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vue.js 的表单要素组件化&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="vue" scheme="https://kisky3.github.io/tags/vue/"/>
    
      <category term="form" scheme="https://kisky3.github.io/tags/form/"/>
    
  </entry>
  
  <entry>
    <title>Vue Image Update</title>
    <link href="https://kisky3.github.io/2020/01/07/VueImageUpdate/"/>
    <id>https://kisky3.github.io/2020/01/07/VueImageUpdate/</id>
    <published>2020-01-07T14:29:44.000Z</published>
    <updated>2020-04-18T09:22:32.358Z</updated>
    
    <content type="html"><![CDATA[<p>Vue的手机拍照相册照片上传<br>一个小demo<br>支持手机相册和拍照上传</p><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input</span><br><span class="line">      id=<span class="string">"upload_file"</span></span><br><span class="line">      type=<span class="string">"file"</span></span><br><span class="line">      style=<span class="string">"display: none;"</span></span><br><span class="line">      accept=<span class="string">"image/*"</span></span><br><span class="line">      name=<span class="string">"file"</span></span><br><span class="line">      @change=<span class="string">"fileChange($event)"</span></span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"upload_warp"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"upload_warp_img"</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"upload_warp_img_div"</span> v-<span class="keyword">for</span>=<span class="string">"(item, index) in imgList"</span>&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"upload_warp_img_div_top"</span>&gt;</span><br><span class="line">            &lt;img</span><br><span class="line">              src=<span class="string">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAkFBMVEX///8nJjYeHS8bGi0gHzAjIjMYFyvy8vMdGy4WFSnt7e7h4eMlJDXm5ujq6usXFirb2934+PlDQk9cW2ZNTFg+PUvT09YSECdpaHIAABxWVWBJSFRsa3VRUFwPDSXNzdA1NEMwLz+urrNhYGuLi5K+vcJ/f4eenqSqqq+Hh46YmJ56eYHEw8cAACEAABmrq7AxYxi+AAALtklEQVR4nN1d2WKiShQUUFFAxRXjSlziTOLM/P/fXdAYkaWKpYHm1qMapVLdp3o9p9W6Q198blar5edebzUc+v5zud1GmJynyqjd6bS7vdWvmp5MEM4rq3tjoq4Oz1eNzR/VUu5ovx3t+p6vKIzj7slkdzQfL0+7SgC9SWMpmtN+kEl3e6c4Pr687FGcL2p+0pwYTrqvTLT1rTN+hl5WFLWZFM1tL8zEOXmvGz0r/LpHsYENdbiNSKVY7x6RixN5vZEqmpOIgn5X/N0aL9WYNzyKJv9SmWCsogr6Is5b5rwT946iuvu6HzoLBq4WS0OxWvZ7tBve0HYbpKK5SiCoKK2FksDQo9iYvmhacX3wm2Gihg2KqPY6NpZ8MxxM4vvhnWIjVDRdQNBKiqUNomhPEMGJ54e75PebYBrxPvjAyBvU6EpyM/UoriXvizZqokrnZgixg5onxcmgbhIIJgoyirI73T71BSlKPdOwO5Bg73j/mJFslzcV59KqCG3CmzzNHk+uh2eIof+ErFNiEyuobZ/SDI9YxYmUEZUpOA22PX3VPBWh0Xvzpunw5ePDJaQooWkskNF7okzD66L6mlCUrKGamGA/pKAPA6soWUPd4ybaW41j/siYYRVlsv7FHCu4in9WnfRFeax/77TRk2rTOAV9DBti/fs5JBiOokEQ61cnUqi4IAoe0e7S8Bi7YvWkKEFEJQpqUwP+uT4lKtYeURcKbqJHTJBaf+2msXchwajRR6Fj0+jV21AX2AfjjD4KYyNvuNnjJhpv9FHIa/0LHGSSjD4KWa2fGf0ynYI+hlsZrR/bhNVfZjllYeD5Yi0qEqPvbtIr6GMwlW3WTxTsZlLQh7GVy/qvHRxkNtkPApEBXK/aKfEZrltnCjJP6OGTDSGKswrDzRUTdHIo6MPAKmqzylQ89yBBdZn3iw2sojpjg1xBuL5jBTMHmSfIfFGrJtyc/+A+uCny5QNi/ZMKVDy7iGBGo4+CzBe1WekqXrGCWY0+Cmb9ZUfUM+yDVjdnFA1Cx9ZfckS94iiax+ijGB5H6Ed6ZVJkRl+4id6hTwjF0hoqMfqdEAV9GEtIsbRwQ4y+9yXupwysorouxTSI0e++xDTRO+qwfmb0H2J/js36xVv/gQzVhCrog1m/6C3U81vieTsfI8EK+mDWvxYaUQ+JRyZv6ApX0AfZ6xdq/QcHN9GPMgj6C/5VWf+hAxXUBNrEK/R1NdZ/6GCbKElBH8T6e2LCzaEPFRRp9FEYa7I8lWZjhOCAh2p/SgkyT4TuSEUoFrf+A7YJ0UYfxWCNDqx61l9QRWIT4o0+CiPm8k1QxWJ9kShYhtFHMYheoHqlWCCiMqMvMYoGQcJN8NBjRhz62CZOImkgkAFcLy/Ff21sE5UR9FRMumX0UDFXuPnXhgq+VUjQG8Bh09C2OQZwlx1UUK2UoEdxThpq5hWUC26i1Srog1h/N+vm2+WvNH3wAWb92dZuLng2UV0UDSLh1uaPiln64gUavTWqhaCn4gqrmN40LioeydREMIX1p1QRR1GrniZ6x4DMNNJRvGjSBZknjHnxARwhWL1NvIKc2EixPCWZ0UcxxCrSvX7pjD4KY4q3bbD1Y6O3ep9V0UAYzMhSMVARG721k4Kgb/1k8y1RRaKgdqmSBsKA3NOYJUymTrAPSkTQP1WMVYz3xU9i9BIRzGf9J/hfsdpSEaTWH7Ow8TmCCv6VjKA/68cLG+Fwc0KJDhSrIx1Br6G+45nGq/WfYnI3BQi+SUiQboS/7PWf3qCCsvXBB8jF1cBe/wl+ULIoGsQQj25++iJRUJM4saE5I7dzbyqeYIe1etIq6GMwgSrebneSKOpITRCmpPKhTQcNM/oohu+QYhvfzbL+StwHHyDDcAv6oNIAgr71Q4qI4Nu/uh8+Hcil92SC1oF/uRwg1p9E0GlEE71jMIMzjVh01MYo6INYf5yCaoMU9DHE1h8l6DRKQR/E+sMElYZE0SCGeK//leBb4xT0Qay/6Qr6SMwL+/9Q0McQ7xL/KNhYgums33Ia2kTvIGs3PsF2gxX0Ya7gOScPDSfYan3hdtoRe4mheoy/WCtVU+cjkRMfPJhqq4puhJcBHefy+Ua3wSpu0jl+71jNyV/h0Jdw2TCAdNmd5MMSbr68qpiYBlBi6Bt8Tiak4rFxKo5T9sEHcCpACTHewAzaMRjRXHlSQd90MzTRh4oNojjeZF9q8zMeNqahekafWUEfo8aYRsYg84TWDOtPb/RRNMP6l2SHFyeCkN/6PaNHDFT3gPf6pbf+8RLvj7p7ng1f6ohq4PQZbcVPtzjAF4p4mtwaYeCTX+35vQyYjbdtWKrjGqHjGhJt55EwkxwQk3aMSm7sPRT0EVOpMAiUcrxGjEkTdYKV6kyiooymMcR5QdqhnK4k1V1/JZ2KY3zLq62Eaw3auLpB2qzOlWFIUrnHlOEbrLGKcvVFfYoVjK0WSaw/TXb1ykBuzN6NPgpm/fL4IjP6SVK9T2Ia0li/ThJIdZIvPg3emzBGJUaP6yiRvlg0N6kQjHGQUTs41QkuDWdpuTMEC4NJ0n7Ta/mkvJ9T90zDIJfyXZ6sBpdo/CnwVxNMPGFPV+0Dl9kslOm5MAZ4opc2Mz0slZo337oQmCRbZOqi0KQKnphUujlgzkhijPQJo4hpZK97IAQDQtDKktzEtAjFGhoqCTJqxsy7ZO2mv6zcNAwSZKysOc1sqGL11m/jI8B5il+Y2Fortn6D3MNLYfRR2KQaV5XWb+PpuZYzyye1/spUZEafO1OrPSFl/yqKqCSKagVKepkuUrFwoYe0T4F9UFsVybVLTKMS62dbR26xJTJs/VYF1k+KuGqFT+Ex6y/bNExC0C1+zNBWYF8sOdyQOsOakLV40tFLtX4Te7KoYmw2vklb4mFN0ge7SWloMoNZf1kqkr2U/EYf81Nk1l/OFipTsGgS6BeY8+qtn9qE2Ho69oxU/RVOkTTRokYfhdnF1i+oStAPWBOdij9uv8B9UfDyFDH6kdA++MCih5tNoYJyIRCj75d0OoRE1J24cEOMPmdu6xRYvGPrF7V2s8dNtF/iJh+Jb4JqdpFa31oJQSbw43gAJ6TuGuuD2RN3Z4KNd4kFRFRSjn5U+nFQbBrF6x8uCMF1+asKNjaNgtZ/JQQrWd8jKhYao9o4Wo/KKZkXQXnWf1VwKezK9ryI9efeJbYxQTFLFulQjvVf8beWNVSLhw3ni/nqcpMo2q341gCz/uzrqHuiYOXnsURbPzH6/lf153iY9WcLN6Rn92s5hm2ruN9ksX4WZL7qOf1hr9FjZbF+qmBdh5SIiqn3+s/4e6qo7ZYEW8hS8V7F1dqrP/cRAPGwVHv9Z1wh0xG9ipcRZNafYgBHan13N3UfvWYr08z6zxZWsL5jgj8gh1KI9Z9ZpWgJjl2TARxeDb8SBSW5b7VwsPUn15o94z5Yl9FHscfD8EQ/25MoKsflhxv2WMWEms8H7IN1Gn0UOKJau7i+yIy+rpPICdjjBYhedO2GGX0lVWqzgCzF78JNjhj96EMuBX3gKawVWoFjCpZa6zsvFgoewAVVJDbh/JYpyDxBTCNg/WeNDLbrpIFArf+bIhuLSqqgD7IC9z0RMvCMvu7pEsaij1W8WcAXvF7n/K6bBAaxfr+YhOminE4jqUYyccALu531sHVBEspn9FHghY3+pTUF78to9FFA6+/MWi5QUEqjj2IBF/xbgKDENvEKaP3JDOU1+ijsUTLF1jwhlDqnpijoY5F826a1jG/DTYiiQSy6SRRb59iMCI4kRVzTI2mp+L01mMSMSruNCTJPxFu/uvGrRkcVlKCQcnbEzfotax+X/6jbqCDzRIz13ydQ5volYay1k3ywnYxFJ0SxrdwPTprTAEVV/dVMBX1cX8PNM3uTftKcXseyOm3tbXuu9RkLwnadn8DZcYLpqYzLZuK689XHtb6nEwL90+3eamG3R+4ptBM4MG2zCVMJBvPXca4o7vHX9xWX/wCc1c1uhrLWkwAAAABJRU5ErkJggg=="</span></span><br><span class="line">              <span class="class"><span class="keyword">class</span></span>=<span class="string">"upload_warp_img_div_del"</span></span><br><span class="line">              @click=<span class="string">"fileDel(index)"</span></span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">          &lt;img :src="item.file.src" style="display: inline-block;" /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div</span></span><br><span class="line"><span class="regexp">          class="upload_warp_left"</span></span><br><span class="line"><span class="regexp">          id="upload_warp_left"</span></span><br><span class="line"><span class="regexp">          @click="fileClick()"</span></span><br><span class="line"><span class="regexp">          v-if="this.imgList.length &lt; 6"</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          &lt;!--&lt;img src="../</span>assets/upload.png<span class="string">"&gt;--&gt;</span></span><br><span class="line"><span class="string">          &lt;div&gt;相册上传&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="</span>upload_warp_text<span class="string">"&gt;</span></span><br><span class="line"><span class="string">      &lt;span</span></span><br><span class="line"><span class="string">        &gt;选中&#123;&#123; imgList.length &#125;&#125;张文件，共&#123;&#123; bytesToSize(this.size) &#125;&#125;&lt;/span</span></span><br><span class="line"><span class="string">      &gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/template&gt;</span></span><br><span class="line"><span class="string">&lt;script type="</span>text/ecmascript<span class="number">-6</span><span class="string">"&gt;</span></span><br><span class="line"><span class="string">  export default &#123;</span></span><br><span class="line"><span class="string">    name: "</span>cameras-and-albums<span class="string">",</span></span><br><span class="line"><span class="string">   data()&#123;</span></span><br><span class="line"><span class="string">    return&#123;</span></span><br><span class="line"><span class="string">     imgList: [],</span></span><br><span class="line"><span class="string">     datas: new FormData(),</span></span><br><span class="line"><span class="string">     files:0,</span></span><br><span class="line"><span class="string">     size:0</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">   &#125;,</span></span><br><span class="line"><span class="string">   methods:&#123;</span></span><br><span class="line"><span class="string">    //调用相册&amp;相机</span></span><br><span class="line"><span class="string">    fileClick() &#123;</span></span><br><span class="line"><span class="string">     $('#upload_file').click();</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    //调用手机摄像头并拍照</span></span><br><span class="line"><span class="string">    getImage() &#123;</span></span><br><span class="line"><span class="string">     let cmr = plus.camera.getCamera();</span></span><br><span class="line"><span class="string">     cmr.captureImage(function(p) &#123;</span></span><br><span class="line"><span class="string">      plus.io.resolveLocalFileSystemURL(p, function(entry) &#123;</span></span><br><span class="line"><span class="string">       compressImage(entry.toLocalURL(),entry.name);</span></span><br><span class="line"><span class="string">      &#125;, function(e) &#123;</span></span><br><span class="line"><span class="string">       plus.nativeUI.toast("</span>读取拍照文件错误：<span class="string">" + e.message);</span></span><br><span class="line"><span class="string">      &#125;);</span></span><br><span class="line"><span class="string">     &#125;, function(e) &#123;</span></span><br><span class="line"><span class="string">     &#125;, &#123;</span></span><br><span class="line"><span class="string">      filter: 'image'</span></span><br><span class="line"><span class="string">     &#125;);</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    //从相册选择照片</span></span><br><span class="line"><span class="string">    galleryImgs() &#123;</span></span><br><span class="line"><span class="string">     plus.gallery.pick(function(e) &#123;</span></span><br><span class="line"><span class="string">      let name = e.substr(e.lastIndexOf('/') + 1);</span></span><br><span class="line"><span class="string">      compressImage(e,name);</span></span><br><span class="line"><span class="string">     &#125;, function(e) &#123;</span></span><br><span class="line"><span class="string">     &#125;, &#123;</span></span><br><span class="line"><span class="string">      filter: "</span>image<span class="string">"</span></span><br><span class="line"><span class="string">     &#125;);</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    //点击事件，弹出选择摄像头和相册的选项</span></span><br><span class="line"><span class="string">    showActionSheet() &#123;</span></span><br><span class="line"><span class="string">     let bts = [&#123;</span></span><br><span class="line"><span class="string">      title: "</span>拍照<span class="string">"</span></span><br><span class="line"><span class="string">     &#125;, &#123;</span></span><br><span class="line"><span class="string">      title: "</span>从相册选择<span class="string">"</span></span><br><span class="line"><span class="string">     &#125;];</span></span><br><span class="line"><span class="string">     plus.nativeUI.actionSheet(&#123;</span></span><br><span class="line"><span class="string">       cancel: "</span>取消<span class="string">",</span></span><br><span class="line"><span class="string">       buttons: bts</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      function(e) &#123;</span></span><br><span class="line"><span class="string">       if (e.index == 1) &#123;</span></span><br><span class="line"><span class="string">        this.getImage();</span></span><br><span class="line"><span class="string">       &#125; else if (e.index == 2) &#123;</span></span><br><span class="line"><span class="string">        this.galleryImgs();</span></span><br><span class="line"><span class="string">       &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">     );</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    fileChange(el) &#123;</span></span><br><span class="line">     this.files=$("#upload_file").get(0).files;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>.files.length);</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.files.length;i++)&#123;</span><br><span class="line">      <span class="keyword">this</span>.datas.append(<span class="string">"file"</span>,<span class="keyword">this</span>.files[i]);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">this</span>.show1=<span class="literal">false</span>;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="keyword">this</span>.files);</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>.files);</span><br><span class="line">     <span class="keyword">if</span> (!el.target.files[<span class="number">0</span>].size) <span class="keyword">return</span>;</span><br><span class="line">     <span class="keyword">this</span>.fileList(el.target);</span><br><span class="line">     el.target.value = <span class="string">''</span></span><br><span class="line">    &#125;,</span><br><span class="line">    fileList(fileList) &#123;</span><br><span class="line">     <span class="keyword">let</span> files = fileList.files;</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">      <span class="comment">//判断是否为文件夹</span></span><br><span class="line">      <span class="keyword">if</span> (files[i].type != <span class="string">''</span>) &#123;</span><br><span class="line">       <span class="keyword">this</span>.fileAdd(files[i]);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="comment">//文件夹处理</span></span><br><span class="line">       <span class="keyword">this</span>.folders(fileList.items[i]);</span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//文件夹处理</span></span><br><span class="line">    folders(files) &#123;</span><br><span class="line">     <span class="keyword">let</span> _this = <span class="keyword">this</span>;</span><br><span class="line">     <span class="comment">//判断是否为原生file</span></span><br><span class="line">     <span class="keyword">if</span> (files.kind) &#123;</span><br><span class="line">      files = files.webkitGetAsEntry();</span><br><span class="line">     &#125;</span><br><span class="line">     files.createReader().readEntries(<span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; file.length; i++) &#123;</span><br><span class="line">       <span class="keyword">if</span> (file[i].isFile) &#123;</span><br><span class="line">        _this.foldersAdd(file[i]);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        _this.folders(file[i]);</span><br><span class="line">       &#125;</span><br><span class="line">      &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    fileAdd(file) &#123;</span><br><span class="line">     <span class="comment">//总大小</span></span><br><span class="line">     <span class="keyword">this</span>.size = <span class="keyword">this</span>.size + file.size;</span><br><span class="line">     <span class="comment">//判断是否为图片文件</span></span><br><span class="line">     <span class="keyword">if</span> (file.type.indexOf(<span class="string">'image'</span>) == <span class="number">-1</span>) &#123;</span><br><span class="line">      file.src = <span class="string">'wenjian.png'</span>;</span><br><span class="line">      <span class="keyword">this</span>.imgList.push(&#123;</span><br><span class="line">       file</span><br><span class="line">      &#125;);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">      reader.vue = <span class="keyword">this</span>;</span><br><span class="line">      reader.readAsDataURL(file);</span><br><span class="line">      reader.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       file.src = <span class="keyword">this</span>.result;</span><br><span class="line">       <span class="keyword">this</span>.vue.imgList.push(&#123;</span><br><span class="line">        file</span><br><span class="line">       &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    fileDel(index) &#123;</span><br><span class="line">     <span class="keyword">this</span>.size = <span class="keyword">this</span>.size - <span class="keyword">this</span>.imgList[index].file.size;<span class="comment">//总大小</span></span><br><span class="line">     <span class="keyword">this</span>.imgList.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    bytesToSize(bytes) &#123;</span><br><span class="line">     <span class="keyword">if</span> (bytes === <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'0 B'</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">let</span> k = <span class="number">1000</span>, <span class="comment">// or 1024</span></span><br><span class="line">      sizes = [<span class="string">'B'</span>, <span class="string">'KB'</span>, <span class="string">'MB'</span>, <span class="string">'GB'</span>, <span class="string">'TB'</span>, <span class="string">'PB'</span>, <span class="string">'EB'</span>, <span class="string">'ZB'</span>, <span class="string">'YB'</span>],</span><br><span class="line">      i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.log(bytes) / <span class="built_in">Math</span>.log(k));</span><br><span class="line">     <span class="keyword">return</span> (bytes / <span class="built_in">Math</span>.pow(k, i)).toPrecision(<span class="number">3</span>) + <span class="string">' '</span> + sizes[i];</span><br><span class="line">    &#125;,</span><br><span class="line">    dragenter(el) &#123;</span><br><span class="line">     el.stopPropagation();</span><br><span class="line">     el.preventDefault();</span><br><span class="line">    &#125;,</span><br><span class="line">    dragover(el) &#123;</span><br><span class="line">     el.stopPropagation();</span><br><span class="line">     el.preventDefault();</span><br><span class="line">    &#125;,</span><br><span class="line">    drop(el) &#123;</span><br><span class="line">     el.stopPropagation();</span><br><span class="line">     el.preventDefault();</span><br><span class="line">     <span class="keyword">this</span>.fileList(el.dataTransfer);</span><br><span class="line">    &#125;,</span><br><span class="line">    shows(et,tx)&#123;</span><br><span class="line">     <span class="keyword">this</span>.strut=et;</span><br><span class="line">     <span class="keyword">this</span>.txt=tx;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleClick()&#123;</span><br><span class="line">     <span class="keyword">this</span>.$store.commit(<span class="string">'add'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">   &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;style lang=""&gt;</span></span><br><span class="line"><span class="regexp">    .upload_warp_img_div_del &#123;</span></span><br><span class="line"><span class="regexp">    position: absolute;</span></span><br><span class="line"><span class="regexp">    top: 6px;</span></span><br><span class="line"><span class="regexp">    width: 16px;</span></span><br><span class="line"><span class="regexp">    right: 4px;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_img_div_top &#123;</span></span><br><span class="line"><span class="regexp">    position: absolute;</span></span><br><span class="line"><span class="regexp">    top: 0;</span></span><br><span class="line"><span class="regexp">    width: 100%;</span></span><br><span class="line"><span class="regexp">    height: 30px;</span></span><br><span class="line"><span class="regexp">    background-color: rgba(0, 0, 0, 0.4);</span></span><br><span class="line"><span class="regexp">    line-height: 30px;</span></span><br><span class="line"><span class="regexp">    text-align: left;</span></span><br><span class="line"><span class="regexp">    color: #fff;</span></span><br><span class="line"><span class="regexp">    font-size: 12px;</span></span><br><span class="line"><span class="regexp">    text-indent: 4px;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_img_div_text &#123;</span></span><br><span class="line"><span class="regexp">    white-space: nowrap;</span></span><br><span class="line"><span class="regexp">    width: 80%;</span></span><br><span class="line"><span class="regexp">    overflow: hidden;</span></span><br><span class="line"><span class="regexp">    text-overflow: ellipsis;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_img_div img &#123;</span></span><br><span class="line"><span class="regexp">    max-width: 100%;</span></span><br><span class="line"><span class="regexp">    max-height: 100%;</span></span><br><span class="line"><span class="regexp">    vertical-align: middle;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_img_div &#123;</span></span><br><span class="line"><span class="regexp">    position: relative;</span></span><br><span class="line"><span class="regexp">    height: 100px;</span></span><br><span class="line"><span class="regexp">    width: 120px;</span></span><br><span class="line"><span class="regexp">    border: 1px solid #ccc;</span></span><br><span class="line"><span class="regexp">    margin: 0px 5px 5px 0px;</span></span><br><span class="line"><span class="regexp">    float: left;</span></span><br><span class="line"><span class="regexp">    line-height: 100px;</span></span><br><span class="line"><span class="regexp">    display: table-cell;</span></span><br><span class="line"><span class="regexp">    text-align: center;</span></span><br><span class="line"><span class="regexp">    background-color: #eee;</span></span><br><span class="line"><span class="regexp">    cursor: pointer;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_img &#123;</span></span><br><span class="line"><span class="regexp">    border-top: 1px solid #D2D2D2;</span></span><br><span class="line"><span class="regexp">    padding: 5px 0 0 5px;</span></span><br><span class="line"><span class="regexp">    overflow: hidden</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_text &#123;</span></span><br><span class="line"><span class="regexp">    text-align: left;</span></span><br><span class="line"><span class="regexp">    margin-bottom: 5px;</span></span><br><span class="line"><span class="regexp">    padding-top: 5px;</span></span><br><span class="line"><span class="regexp">    text-indent: 14px;</span></span><br><span class="line"><span class="regexp">    border-top: 1px solid #ccc;</span></span><br><span class="line"><span class="regexp">    font-size: 14px;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_right &#123;</span></span><br><span class="line"><span class="regexp">    float: left;</span></span><br><span class="line"><span class="regexp">    width: 57%;</span></span><br><span class="line"><span class="regexp">    margin-left: 2%;</span></span><br><span class="line"><span class="regexp">    height: 100%;</span></span><br><span class="line"><span class="regexp">    border: 1px dashed #999;</span></span><br><span class="line"><span class="regexp">    border-radius: 4px;</span></span><br><span class="line"><span class="regexp">    line-height: 130px;</span></span><br><span class="line"><span class="regexp">    color: #999;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_left button &#123;</span></span><br><span class="line"><span class="regexp">    margin: 8px 5px 0px 5px;</span></span><br><span class="line"><span class="regexp">    cursor:pointer;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp_left &#123;</span></span><br><span class="line"><span class="regexp">    float: left;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.upload_warp &#123;</span></span><br><span class="line"><span class="regexp">    margin: 5px;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vue的手机拍照相册照片上传&lt;br&gt;一个小demo&lt;br&gt;支持手机相册和拍照上传&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="vue" scheme="https://kisky3.github.io/tags/vue/"/>
    
      <category term="image upload" scheme="https://kisky3.github.io/tags/image-upload/"/>
    
  </entry>
  
  <entry>
    <title>Easy Slack bot from Google Apps Script</title>
    <link href="https://kisky3.github.io/2019/12/25/SlackBot/"/>
    <id>https://kisky3.github.io/2019/12/25/SlackBot/</id>
    <published>2019-12-25T14:50:23.000Z</published>
    <updated>2020-04-18T09:22:32.333Z</updated>
    
    <content type="html"><![CDATA[<p>如何利用GAS做一个简单的机器人</p><a id="more"></a><p>如何利用GAS(Google Apps Script)来做一个可以定时提醒的bot呢.<br>首先功能是这样，每天早上（除了周末和节假日）的8:59分和下午17:59的时候，会自动发消息圈到当天应该做值日的人，并提醒他做值日。<br><img src="./1.png" style="width: 400px"></p><hr><h3 id="创建频道"><a href="#创建频道" class="headerlink" title="创建频道"></a>创建频道</h3><p>在slack上创建一个用于发送和管理消息的频道。名字和说明任意即可。<br>如果要往已存在的频道发送消息则可以忽略这一步。<br><img src="./2.png" style="width: 400px"></p><hr><h3 id="制作Bot"><a href="#制作Bot" class="headerlink" title="制作Bot"></a>制作Bot</h3><p>点击<a href="https://api.slack.com/start/overview" target="_blank" rel="noopener">https://api.slack.com/start/overview</a>,　然后在跳转页面点击「Create a Slack App」</p><p>输入你的bot名字和workplace,然后点击「Create App」。<br><img src="./3.png" style="width: 400px"></p><hr><h3 id="设置Incoming-Webhooks"><a href="#设置Incoming-Webhooks" class="headerlink" title="设置Incoming Webhooks"></a>设置Incoming Webhooks</h3><p>在bot设定的左侧介面点击features&gt;Incoming Webhooks、将「Activate Incoming Webhooks」 设置为On。<br>然后在页面下部会出现「Add New Webhook to WorkSpace 」的选项，点击并许可。<br><img src="./4.png" style="width: 400px"><br><img src="./5.png" style="width: 400px"></p><p>在页面的下方会显示「Webhook URL」，记得要将它复制下来。<br>之后GAS里的Script代码需要用它来进行连接并取得你在GAS里创建的数据。</p><hr><h3 id="制作保存数据的GAS"><a href="#制作保存数据的GAS" class="headerlink" title="制作保存数据的GAS"></a>制作保存数据的GAS</h3><p>这里需要三列，一是用于显示的值日生名字，一个是对应值日日期，第三列是slack上该用户的对应用户名（这里建议用用户ID，因为当用户名中间有空格时，有时不能很好地圈到slack用户）<br><img src="./6.png" style="width: 400px"></p><hr><h3 id="制作GAS的script"><a href="#制作GAS的script" class="headerlink" title="制作GAS的script"></a>制作GAS的script</h3><p>从菜单点击「ツール」「スクリプトエディタ」，然后在里面输入你的script代码。<br><img src="./7.png" style="width: 400px"><br><img src="./8.png" style="width: 400px"></p><p>这次使用的代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// set timer 08:59</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setTrigger08</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> triggerDay = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  triggerDay.setHours(<span class="number">08</span>);</span><br><span class="line">  triggerDay.setMinutes(<span class="number">59</span>);</span><br><span class="line">  ScriptApp.newTrigger(<span class="string">"main"</span>).timeBased().at(triggerDay).create();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// set timer 17:59</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setTrigger17</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> triggerDay = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  triggerDay.setHours(<span class="number">17</span>);</span><br><span class="line">  triggerDay.setMinutes(<span class="number">59</span>);</span><br><span class="line">  ScriptApp.newTrigger(<span class="string">"main"</span>).timeBased().at(triggerDay).create();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// delete Trigger</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteTrigger</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> triggers = ScriptApp.getProjectTriggers();</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; triggers.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (triggers[i].getHandlerFunction() == <span class="string">"main"</span>) &#123;</span><br><span class="line">      ScriptApp.deleteTrigger(triggers[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main method</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  deleteTrigger();</span><br><span class="line">  core_function();</span><br><span class="line">  Logger.log(<span class="string">'main'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">core_function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Get script sheet URL</span></span><br><span class="line">    <span class="keyword">var</span> spreadSheet = SpreadsheetApp.openByUrl(<span class="string">'https://docs.google.com/spreadsheets/xxxxxx'</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Get the first sheet</span></span><br><span class="line">    <span class="keyword">var</span> sheet = spreadSheet.getSheets()[<span class="number">0</span>];</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Get Rows</span></span><br><span class="line">    <span class="keyword">var</span> lastrow = sheet.getLastRow();</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Get current date</span></span><br><span class="line">    <span class="keyword">var</span> currentDay = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// To determine if a current date is a workday or not</span></span><br><span class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">isWeekDay</span>(<span class="params">currentDate</span>) </span>&#123;</span><br><span class="line">  　　<span class="keyword">var</span> weekday = currentDate.getDay();</span><br><span class="line">  　　<span class="keyword">if</span> (weekday == <span class="number">0</span> || weekday == <span class="number">6</span>) &#123;</span><br><span class="line">    　　<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  　　&#125;</span><br><span class="line">  　　<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">　　&#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// To determine if a current date is a holiday or not</span></span><br><span class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">isEventsForDay</span>(<span class="params">currentDate</span>) </span>&#123;</span><br><span class="line">  　　<span class="keyword">var</span> calendar = CalendarApp.getCalendarById(<span class="string">'ja.japanese#holiday@group.v.calendar.google.com'</span>);</span><br><span class="line">  　　<span class="keyword">if</span> (calendar.getEventsForDay(currentDate, &#123;<span class="attr">max</span>: <span class="number">1</span>&#125;).length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    　　<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  　　&#125;</span><br><span class="line">  　　<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">　　&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Get name ,date and metion name array</span></span><br><span class="line">    <span class="keyword">var</span> name_array = sheet.getSheetValues(<span class="number">2</span>, <span class="number">1</span>, lastrow, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> date_array = sheet.getSheetValues(<span class="number">2</span>, <span class="number">2</span>, lastrow, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> mention_array = sheet.getSheetValues(<span class="number">2</span>, <span class="number">3</span>, lastrow, <span class="number">1</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Set date format for today</span></span><br><span class="line">    <span class="keyword">var</span> today = Utilities.formatDate(<span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="string">"Asia/Tokyo"</span>, <span class="string">"yyyy/MM/dd"</span>);</span><br><span class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Roop to get date_number</span></span><br><span class="line">    <span class="keyword">var</span> date_num = date_array.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; date_num - <span class="number">1</span>; i++) &#123;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// Set date format for date</span></span><br><span class="line">        date.push(Utilities.formatDate(<span class="keyword">new</span> <span class="built_in">Date</span>(date_array[i]), <span class="string">"Asia/Tokyo"</span>, <span class="string">"yyyy/MM/dd"</span>));</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// Get index if today = date</span></span><br><span class="line">        <span class="keyword">var</span> num = date.indexOf(today);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Get name through index we got</span></span><br><span class="line">    <span class="keyword">var</span> member = name_array[num];</span><br><span class="line">    <span class="keyword">var</span> mention = mention_array[num];</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// if it is workday and not holiday then set message</span></span><br><span class="line">    <span class="keyword">var</span> message;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(member &amp;&amp; isWeekDay(currentDay) &amp;&amp; !isEventsForDay(currentDay)) &#123;</span><br><span class="line"> </span><br><span class="line">        message = <span class="string">'Hey〜！:sunny:\n 今日の当番は　*'</span> + member + <span class="string">'* です！ &lt;@'</span> + mention + <span class="string">'&gt;: \n 本日「加湿器ON/OFF」、「終礼」、「ゴミ捨て」をあなたに任せるよ ！！ \n ※都合が悪い時にみんなに言ってくださいね'</span>;</span><br><span class="line">       </span><br><span class="line">       <span class="comment">// Send message to slack</span></span><br><span class="line">       Logger.log(message);</span><br><span class="line">       postSlack(message)</span><br><span class="line">    &#125; </span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">postSlack</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Webhook URL you copied when you created a app</span></span><br><span class="line">    <span class="keyword">var</span> url = <span class="string">"https://hooks.slack.com/xxxxxxxx"</span>;</span><br><span class="line">    <span class="keyword">var</span> options = &#123;</span><br><span class="line">      <span class="string">"method"</span> : <span class="string">"POST"</span>,</span><br><span class="line">      <span class="string">"headers"</span>: &#123;<span class="string">"Content-type"</span>: <span class="string">"application/json"</span>&#125;,</span><br><span class="line">      <span class="string">"payload"</span> : <span class="string">'&#123;"text":"'</span> + message + <span class="string">'"&#125;'</span></span><br><span class="line">    &#125;;</span><br><span class="line">     <span class="comment">// Run here</span></span><br><span class="line">     UrlFetchApp.fetch(url, options);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="将GAS-Script设置为公开Application"><a href="#将GAS-Script设置为公开Application" class="headerlink" title="将GAS　Script设置为公开Application"></a>将GAS　Script设置为公开Application</h3><p>从菜单的「公開」点击「ウェブアプリケーションとして導入」<br><img src="./9.png" style="width: 400px"></p><img src="./10.png" style="width: 400px"><p>点击更新按钮后Web　Application的URL就会被更新，然后同样将它copy下来。</p><hr><h3 id="设置SlackApi的Outgoing-Webhooks"><a href="#设置SlackApi的Outgoing-Webhooks" class="headerlink" title="设置SlackApi的Outgoing Webhooks"></a>设置SlackApi的Outgoing Webhooks</h3><p>连接下面的URL</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://(your workplace name).slack.com/apps/manage</span><br></pre></td></tr></table></figure><p>OutgoingWebhooks为关键词搜索，并点击出现的Popup,跳转之后点击设定。<br><img src="./11.png" style="width: 400px"></p><p>在Outgoing Webhooks的Integration Settings里设定你的频道名，并将刚刚复制的GAS的URL粘贴并保存。<br><img src="./12.png" style="width: 400px"></p><hr><h3 id="Slack里发送消息的设定"><a href="#Slack里发送消息的设定" class="headerlink" title="Slack里发送消息的设定"></a>Slack里发送消息的设定</h3><p>在GAS的编辑页面，点击菜单「編集」「現在のプロジェクトのトリガー」。</p><p>在GAS管理页面打开后点击右下的「トリガーを追加」。<br><img src="./15.png" style="width: 400px"><br><img src="./14.png" style="width: 400px"></p><p>完成！</p><hr><h3 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h3><h5 id="1-GAS只能在一个小时内进行执行，如何尽量准确地指定时间呢。可以在scirpt里写入下面的代码："><a href="#1-GAS只能在一个小时内进行执行，如何尽量准确地指定时间呢。可以在scirpt里写入下面的代码：" class="headerlink" title="1.GAS只能在一个小时内进行执行，如何尽量准确地指定时间呢。可以在scirpt里写入下面的代码："></a>1.GAS只能在一个小时内进行执行，如何尽量准确地指定时间呢。可以在scirpt里写入下面的代码：</h5><p>然后トリガー的执行时间设定选择为08~09点，这样就可以在08:59的准确时间进行Slack的消息发送了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// set timer 08:59</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setTrigger08</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> triggerDay = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  triggerDay.setHours(<span class="number">08</span>);</span><br><span class="line">  triggerDay.setMinutes(<span class="number">59</span>);</span><br><span class="line">  ScriptApp.newTrigger(<span class="string">"main"</span>).timeBased().at(triggerDay).create();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考：<br><a href="https://qiita.com/sumi-engraphia/items/465dd027e17f44da4d6a" target="_blank" rel="noopener">Google Apps Scriptの日毎のトリガーで時間をもっと細かく設定する</a></p><hr><h5 id="2-在Slack想圈出用户时，如果用户名中间有空格则会失效"><a href="#2-在Slack想圈出用户时，如果用户名中间有空格则会失效" class="headerlink" title="2.在Slack想圈出用户时，如果用户名中间有空格则会失效"></a>2.在Slack想圈出用户时，如果用户名中间有空格则会失效</h5><p>这时不使用&lt;@username&gt;而是使用&lt;@userID&gt;，就可以解决这个问题了。<br>类似这样的<br><img src="./16.png" style="width: 400px"></p><p>参考：<br><a href="https://qiita.com/tomoeine/items/ee7bae955efec9db1a96" target="_blank" rel="noopener">Slack APIでユーザー宛のメンションができなくなったので対策した</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;如何利用GAS做一个简单的机器人&lt;/p&gt;
    
    </summary>
    
      <category term="System Setting" scheme="https://kisky3.github.io/categories/System-Setting/"/>
    
    
      <category term="setting" scheme="https://kisky3.github.io/tags/setting/"/>
    
      <category term="slack bot" scheme="https://kisky3.github.io/tags/slack-bot/"/>
    
      <category term="slack" scheme="https://kisky3.github.io/tags/slack/"/>
    
      <category term="Google Apps Script" scheme="https://kisky3.github.io/tags/Google-Apps-Script/"/>
    
  </entry>
  
  <entry>
    <title>Create a Git Commit Template</title>
    <link href="https://kisky3.github.io/2019/12/21/GitCommitTemplate/"/>
    <id>https://kisky3.github.io/2019/12/21/GitCommitTemplate/</id>
    <published>2019-12-21T14:27:00.000Z</published>
    <updated>2020-04-18T09:22:32.272Z</updated>
    
    <content type="html"><![CDATA[<p>创建Git Commit的Template</p><a id="more"></a><p>我们可以在commit的时候进行commit内容的统一。</p><h3 id="生成commit-message-template"><a href="#生成commit-message-template" class="headerlink" title="生成commit message template"></a>生成commit message template</h3><p>commit message template 本身可以指定路径并且让Git读取，可以在任意路径进行。</p><p>今天我们在my-cheatsheet的project的根目录进行配置。<br>并且设定只针对这个project有效。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 任意的文件名都可以</span><br><span class="line">$ vi .gitmessage</span><br></pre></td></tr></table></figure><p>然后可以自行设置commit内容，包括颜文字</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[branchname]</span><br><span class="line"># ==== Emojis ====</span><br><span class="line"># ✏️  :pencil2: Writing docs</span><br><span class="line"># 🐛  :bug: Fix bugs</span><br><span class="line"># 👍  :+1: Feature improvements</span><br><span class="line"># ✨  :sparkles: Additional partial feature</span><br><span class="line"># 🎉  :tada: Grand major features added to celebrate</span><br><span class="line"># ♻️  :recycle :Refactoring</span><br><span class="line"># 🚿  :shower: Removal of obsolete functions or features.</span><br><span class="line"># 💚  :green_heart: Modification and improvement of testing and CI</span><br><span class="line"># 👕  :shirt: Fixing of errors found by Lint.</span><br><span class="line"># 🚀  :rocket: Performance improvement</span><br><span class="line"># 🆙  :up: Updates, such as dependent package</span><br><span class="line"># 🔒  :lock: Limit of the range of new features</span><br><span class="line"># 👮  :cop: Security-related improvements</span><br><span class="line"># ==== Format ====</span><br><span class="line"># :emoji: Subject #issue No.</span><br><span class="line">#</span><br><span class="line"># Commit body...</span><br><span class="line"># ==== The Seven Rules ====</span><br><span class="line"># 1. Separate subject from body with a blank line</span><br><span class="line"># 2. Limit the subject line to 50 characters</span><br><span class="line"># 3. Capitalize the subject line</span><br><span class="line"># 4. Do not end the subject line with a period</span><br><span class="line"># 5. Use the imperative mood in the subject line</span><br><span class="line"># 6. Wrap the body at 72 characters</span><br><span class="line"># 7. Use the body to explain what and why vs. how</span><br></pre></td></tr></table></figure><hr><h3 id="注册你的commit-message-template"><a href="#注册你的commit-message-template" class="headerlink" title="注册你的commit message template"></a>注册你的commit message template</h3><p>在git config里注册你生成的Template。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config commit.template .gitmessage</span><br></pre></td></tr></table></figure><p>如果你想电脑里存在所有Git管理的项目都使用这个Template的话。要加上global option。<br>这个例子没有加option，说明只是针对当前的项目使用这个Template。</p><hr><h3 id="使用Template"><a href="#使用Template" class="headerlink" title="使用Template"></a>使用Template</h3><p>设置完成后在你commit的时候Template就会自动显示了，在commit的时候输入相应的emoji的编码就可以显示了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:bug: correct a bug</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[branchname]</span><br><span class="line"># ==== Emojis ====</span><br><span class="line"># ✏️  :pencil2: Writing docs</span><br><span class="line"># 🐛  :bug: Fix bugs</span><br><span class="line"># 👍  :+1: Feature improvements</span><br><span class="line">//　省略</span><br></pre></td></tr></table></figure><p>以上！！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;创建Git Commit的Template&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="Git" scheme="https://kisky3.github.io/tags/Git/"/>
    
      <category term="Template" scheme="https://kisky3.github.io/tags/Template/"/>
    
  </entry>
  
  <entry>
    <title>node.js Error:Listen EADDRINUSE</title>
    <link href="https://kisky3.github.io/2019/12/21/EADDRINUSE/"/>
    <id>https://kisky3.github.io/2019/12/21/EADDRINUSE/</id>
    <published>2019-12-21T14:07:45.000Z</published>
    <updated>2020-04-18T09:22:32.053Z</updated>
    
    <content type="html"><![CDATA[<p>node.js启动错误: Error: listen EADDRINUSE</p><a id="more"></a><p>在启动node app.js的时候出现了下面的错误</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">events.js:72</span><br><span class="line">        throw er; // Unhandled &apos;error&apos; event</span><br><span class="line">              ^</span><br><span class="line">Error: listen EADDRINUSE</span><br><span class="line">    at errnoException (net.js:904:11)</span><br><span class="line">    at Server._listen2 (net.js:1042:14)</span><br><span class="line">    at listen (net.js:1064:10)</span><br><span class="line">    at Server.listen (net.js:1138:5)</span><br><span class="line">    at Function.app.listen (/vagrant/girly/girly-batch/node_modules/express/lib/application.js:532:24)</span><br><span class="line">    at Object.&lt;anonymous&gt; (/vagrant/girly/girly-batch/bin/www:7:18)</span><br><span class="line">    at Module._compile (module.js:456:26)</span><br><span class="line">    at Object.Module._extensions..js (module.js:474:10)</span><br><span class="line">    at Module.load (module.js:356:32)</span><br><span class="line">    at Function.Module._load (module.js:312:12)</span><br></pre></td></tr></table></figure><p>原因是因为端口号被占用了。关闭占用该端口号的进程然后再次启动就好。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ps aux | grep node</span><br><span class="line">vagrant  14761  0.0  2.0 704016 38520 pts/0    Sl+  01:22   0:01 node app.js</span><br><span class="line">vagrant  15069  0.0  0.0 107456   908 pts/2    S+   01:59   0:00 grep --color=auto node</span><br><span class="line"></span><br><span class="line">$ sudo kill -9 14761</span><br><span class="line">$ node app.js</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;node.js启动错误: Error: listen EADDRINUSE&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="node.js" scheme="https://kisky3.github.io/tags/node-js/"/>
    
  </entry>
  
  <entry>
    <title>Connecting to GitHub with SSH</title>
    <link href="https://kisky3.github.io/2019/12/21/AboutGithubssh/"/>
    <id>https://kisky3.github.io/2019/12/21/AboutGithubssh/</id>
    <published>2019-12-21T08:40:36.000Z</published>
    <updated>2020-04-18T09:22:32.012Z</updated>
    
    <content type="html"><![CDATA[<p>利用ssh连接Github</p><a id="more"></a><p>虽然已经用ssh连接Github好几次了，但是一直以来对公钥和密钥的加密过程不清不楚，所以在这里总结以下</p><h3 id="什么是公钥和私钥"><a href="#什么是公钥和私钥" class="headerlink" title="什么是公钥和私钥"></a>什么是公钥和私钥</h3><p>公钥（Public Key）与私钥（Private Key）是通过一种算法得到的一个密钥对。<br>公钥是密钥对中公开的部分。</p><p>公钥加密法的步骤如下：</p><ol><li>首先接受方生成一对密钥，即私钥和公钥。</li><li>然后接收方将公钥法送给发送方。</li><li>发送方用收到的公钥对数据加密,再发送给接收方。</li><li>接收方收到数据后，使用自己的私钥解密。</li></ol><p>由于再非对称算法中，公钥加密的数据必须使用对应的私钥才能解密，而私钥又只有接受方自己知道，<br>这样就保证了数据传输的安全性。</p><hr><h3 id="公钥和密钥的生成"><a href="#公钥和密钥的生成" class="headerlink" title="公钥和密钥的生成"></a>公钥和密钥的生成</h3><p>连接Github的时候，需要再本地生成公钥和密钥，密钥自己保存而公钥需要发送给Github。</p><p>首先移动到保存钥的文件夹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$cd ~/.ssh</span><br></pre></td></tr></table></figure><p>第一次生成钥匙的时候这个文件夹里应该是空的啥都没有。<br>不管有没有先生成钥,也可以自行加上option，但是一般情况下这样就可以了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>一般来说不用在意问题，连续三次按下回车键就可以看到生成了id_rsa(私钥)和id_rsa.pub(公钥)公钥对。<br>如果你已经生成过私钥(id_rsa)的话在这里会被覆盖。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/(username)/.ssh/id_rsa):</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br></pre></td></tr></table></figure><img src="./1.png" style="width: 500px"><br>当你想修改钥名的时候，在第一个问题里输入你想要生成的钥名。比如在这里就指定了id_git_rsa,然后持续按下回车键就可以生成id_git_rsa和id_git_rsa.pub两个公钥对了。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/Users/(username)/.ssh/id_rsa):id_git_rsa</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br></pre></td></tr></table></figure><hr><h3 id="将公钥上传到Github"><a href="#将公钥上传到Github" class="headerlink" title="将公钥上传到Github"></a>将公钥上传到Github</h3><p>点击下面的网页进行公钥的设置：（前提是你已经拥有了自己的Github账号）<br><a href="https://github.com/settings/ssh" target="_blank" rel="noopener">https://github.com/settings/ssh</a></p><p>在画面上点击「Add SSH key」,然后在title的地方输入公钥名（任意），「key」里输入你生成公钥的内容。</p><img src="./2.png" style="width: 500px"><p>利用下面的命令行进行公钥内容的copy</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pbcopy &lt; ~/.ssh/id_rsa.pub (Mac)</span><br><span class="line">$ clip &lt; ~/.ssh/id_rsa.pub (Windows)</span><br></pre></td></tr></table></figure><ul><li>钥名为你自己生成的钥名，默认为id_rsa.pub</li></ul><hr><h3 id="确认连接"><a href="#确认连接" class="headerlink" title="确认连接"></a>确认连接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>如果返回以下的文字则说明已经连接成功了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi (account名)! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><p>但是注意如果生成钥的时候你指定了自己的钥名，有可能会连接不成功。<br>这是因为ssh连接的时候自动默认参照的是「<del>/.ssh/id_rsa」、「</del>/.ssh/id_dsa」、「<del>/.ssh/identity」的钥名文件。<br>你需要自己在</del>/.ssh/config中进行定义。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host github github.com</span><br><span class="line">  HostName github.com</span><br><span class="line">  IdentityFile ~/.ssh/id_git_rsa # 在这里写下自己设置的私匙文件名</span><br><span class="line">  User git</span><br></pre></td></tr></table></figure><p>然后再连接一次应该就能连接上了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T github</span><br></pre></td></tr></table></figure><hr><h3 id="与GitHub的互动"><a href="#与GitHub的互动" class="headerlink" title="与GitHub的互动"></a>与GitHub的互动</h3><p>实际上在与Github互动的时候,比如pull或push的时候还需要确认用户名和密码，那就说明SSH并没有很好地运作。<br>在~/.gitconfig文件里进行设定后就可以解决了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[url &quot;github:&quot;]</span><br><span class="line">    InsteadOf = https://github.com/</span><br><span class="line">    InsteadOf = git@github.com:</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;利用ssh连接Github&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="Git" scheme="https://kisky3.github.io/tags/Git/"/>
    
      <category term="SSH" scheme="https://kisky3.github.io/tags/SSH/"/>
    
  </entry>
  
  <entry>
    <title>The Basic Annals of Xiang Yu</title>
    <link href="https://kisky3.github.io/2019/12/14/XiangyuBenJi/"/>
    <id>https://kisky3.github.io/2019/12/14/XiangyuBenJi/</id>
    <published>2019-12-14T14:06:37.000Z</published>
    <updated>2020-04-18T09:22:32.358Z</updated>
    
    <content type="html"><![CDATA[<p>史记・项羽本纪</p><a id="more"></a><p>前两天刷了项羽本纪（顺带把相关纪录片和秦始皇本纪也看完了）</p><p>乱世出英雄，令我惊奇的是2000多年前的他，透过文字依然能给我传达了很鲜明的个人特色和画面感。<br>有如神助末路英雄的设定真的是完爆一切网络爽文。</p><p>巨鹿之战，在所有诸侯作壁上观之时，孤立无援，还受到怀王排挤之时，项羽能够当机立断一举斩杀宋义，在节骨眼夺回兵权。<br>然后破釜沉舟再一举灭了大秦。他的对手是章邯和王离啊，两个都是顶级的战神大佬，可惜项羽是灭霸一样的存在。</p><p>5万零散的楚军敌王离和章邯的40万大军，一战成名，从那天起巨鹿之战也成为了以少胜多的名战争的代表。<br>灭秦之后，各诸侯见他都是犹如见神，一路跪着前行参拜。几乎一己之力灭掉了第一强国大秦的项羽，在彼时人们眼中毫无疑问就是神一般的存在。而那时他才24岁啊。</p><p>之后的彭城之战也是以少胜多，仅仅3万人马，日夜兼程赶回，连夜进攻，半天就将刘邦的56万汉军打得溃不成军。这一战更是奠定了他灭霸的地位。</p><img src="./1.jpg" style="width: 500px"><p>个人觉得项羽有一种贵族出生的少年气，意气风发,雷厉风行，喜欢光明磊落少一点城府和厚重感。</p><p>他不计较樊哙的鲁莽，反而赏赐酒肉，大度地微笑着欣赏他。<br>他担忧战乱频繁生灵涂炭，三番两次请战刘邦要求单独决斗。<br>他在四面楚歌之时的绝望，作出垓下之歌表达对跟随自己多年的美人和名驹的不舍。<br>他在说出天要亡我决定放弃一切决死一战之际，还把名驹赠与了乌江亭长。<br>在他最后下马步战，单人斩杀汉军三百余骑之后，还亲手斩下自己的头颅赠与了旧相识用于换赏。</p><p>这样的一代枭雄，最后连个全尸都没留下来。<br>胜者为王败者为寇，后世写的史书还有刻意抹黑项羽的成分。（比如硬说阿房宫是他烧的，还说他挖了秦始皇的陵墓）</p><p>想想甚是难过。</p><p>最后跑个题，发现古人的名字都好有意味<br>项羽，刘邦，宋义，熊心，樊哙，项庄，萧何，韩信，章邯，王翦，王离，虞姬，蒙恬，赢政，李斯等等…<br>简单又大气，喜欢!</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;史记・项羽本纪&lt;/p&gt;
    
    </summary>
    
      <category term="About Me" scheme="https://kisky3.github.io/categories/About-Me/"/>
    
    
      <category term="Xiang Yu" scheme="https://kisky3.github.io/tags/Xiang-Yu/"/>
    
      <category term="Hegemon-King of Western Chu" scheme="https://kisky3.github.io/tags/Hegemon-King-of-Western-Chu/"/>
    
      <category term="Xiang Ji" scheme="https://kisky3.github.io/tags/Xiang-Ji/"/>
    
      <category term="Records of the Grand Historian" scheme="https://kisky3.github.io/tags/Records-of-the-Grand-Historian/"/>
    
  </entry>
  
  <entry>
    <title>SSR VS CSR</title>
    <link href="https://kisky3.github.io/2019/12/09/SSRAndCSR/"/>
    <id>https://kisky3.github.io/2019/12/09/SSRAndCSR/</id>
    <published>2019-12-09T01:59:42.000Z</published>
    <updated>2020-04-18T09:22:32.326Z</updated>
    
    <content type="html"><![CDATA[<p>SSR和CSR</p><a id="more"></a><p>本文分别从两者的概念，主要的不同，优劣势列举等等去分析CSR和SSR。</p><h3 id="SSR和CSR的概念"><a href="#SSR和CSR的概念" class="headerlink" title="SSR和CSR的概念"></a>SSR和CSR的概念</h3><ul><li>SSR(Server Side Rendering) ：<br>传统的渲染方式，由服务端把渲染的完整的页面吐给客户端。这样减少了一次客户端到服务端的一次http请求，加快相应速度，一般用于首屏的性能优化。<img src="./1.png" style="width: 500px"><br></li><li>CSR(Client Side Rendering)：<br>是一种目前流行的渲染方式，它依赖的是运行在客户端的JS，用户首次发送请求只能得到小部分的指引性HTML代码。第二次请求将会请求更多包含HTML字符串的JS文件。<img src="./2.png" style="width: 500px"></li></ul><hr><h3 id="两者有何不同"><a href="#两者有何不同" class="headerlink" title="两者有何不同"></a>两者有何不同</h3><p>服务器端渲染的优势在于首屏渲染速度块，简单来讲它不需要来回多次往返于客户端和服务端。但是其性能等众多因素会影响用户体验，比如说：网速，在线活跃人数，服务器的物理位置等等。而客户端渲染则和服务端渲染相反，因为多次和服务器的交互导致首屏加载速度慢。但一旦这些请求完成之后，用户和页面之间的交互时用户体验就会好很多。</p><p>用一个现实生活的例子来看：假如从超市买东西吃，以SSR的角度来看，你每次在超市买完随即吃完再走，每次饿了都需要出发去超市。而从CSR的角度来看，就是你从超市购买许多原材料再拿回家去自己煮，多了能放冰箱，这样每次肚子饿了就不需要每次都往超市跑，唯一麻烦一点在于你得花时间挑选食材。</p><p style="font-weight:bold;background:rgb(255, 0, 0,0.1);padding:5px">简而言之，SSR强在首屏渲染。而CSR强在用户和页面多交互的场景。</p><hr><h3 id="服务端渲染如何工作"><a href="#服务端渲染如何工作" class="headerlink" title="服务端渲染如何工作"></a>服务端渲染如何工作</h3><p>服务器渲染简单说来就是将一个完整的HTML发送给客户端，客户端只负责HTML的解析。<br>不过由于网速等影响有可能造成用户体验不佳的情况。<br>如果面临客户端和服务器多次交互的情况就更为明显了。因为即使是在页面只有稍加改动的地方都需要重新请求服务器发送一个完整页面给浏览器，然后浏览器再次进行重新渲染。<br>这对服务器的消耗是非常大的。</p><p>实例：<br>假如你需要访问的域名叫： example.testsite.com<br> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Example Website<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>My Website<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is an example of my new website<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://example.testsite.com/other.html."</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p> 当我们点击Link的时候，就会跳转到下面这个页面:<br> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Example Website<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>My Website<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is an example of my new website<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is some more content from the other.html<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p> 效果是当你点击Link的时候，<br> 可以看出来这两个页面的差异非常小，但是渲染的时候要将整个页面进行重新渲染，而不是只渲染不同的那一行。<br> 如果复杂的页面代码量大的情况下，这是不合适的。</p> <p style="font-weight:bold;background:rgb(255, 0, 0,0.1);padding:5px">从上面的页面特征来看，使用服务器端渲染的返回的页面是完整的HTML页面。</p><hr><h3 id="客户端是如何工作的"><a href="#客户端是如何工作的" class="headerlink" title="客户端是如何工作的"></a>客户端是如何工作的</h3><p> 客户端代表渲染内容部分转嫁到JS身上。客户端只是从服务器得到相对简单的HTML文档，然后使用JS文件对页面的显示内容进行控制。就像Vue.js 用的就是这种方式，还是用刚才那个例子，看看用客户端渲染是怎么做的。</p><p> 假设你想要访问的域名还是<a href="http://example.testsite.com" target="_blank" rel="noopener">http://example.testsite.com</a><br> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Example Website<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">app</span>&gt;</span><span class="tag">&lt;/<span class="name">app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--下面两个js文件控制HTML的显示内容 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://vuejs.org"</span><span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"location/of/app.js"</span><span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p> 可以通过上面的html页面看到，你只能识别到自定义组件名id为root的div的标签。<br> 而所有的逻辑处理你看不到，全部被写在了app.js里面。<br>如果需要看到完整的页面的模样，就必须要下载app.js到本地才能运作，否则直接访问你是什么都看不到的。</p><p>OK，假如现在你把app.js下载到本地了，那我们来看看app.js的内容: </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// this is app.js</span><br><span class="line">var data = &#123;</span><br><span class="line">        title:"My Website",</span><br><span class="line">        message:"This is an example of my new website"</span><br><span class="line">      &#125;</span><br><span class="line">  Vue.component('app', &#123;</span><br><span class="line">    template:</span><br><span class="line">    `</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"moreContent"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click</span>=<span class="string">'newContent'</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    `,</span><br><span class="line">    data: function() &#123;</span><br><span class="line">      return data;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      newContent: function()&#123;</span><br><span class="line">        var node = document.createElement('p');</span><br><span class="line">        var textNode = document.createTextNode('This is some more content from the other.html');</span><br><span class="line">        node.appendChild(textNode);</span><br><span class="line">        document.getElementById('moreContent').appendChild(node);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  new Vue(&#123;</span><br><span class="line">    el: '#root',</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>在这里，当你点击了Link的时候，Vue的js起了效果，通过操作DOM给p添加了需要展示的那一行内容。<br>这里不需要页面和服务器的交互，只是对所需要添加的内容进行了修改，而不是像SSR一样做了整个页面的重新渲染。</p><p>当然这里也暴露了一个问题:<br>就是控制页面的所有js文件如果没有完全加载的话，真个页面是渲染不出来的。<br>这是导致了客户端渲染弱于服务端渲染的原因。</p><p style="font-weight:bold;background:rgb(255, 0, 0,0.1);padding:5px">从这个例子来看，可以看出客户端渲染的页面特征是包含有js链接的script标签。</p><h3 id="总结SSR和CSR的优劣势"><a href="#总结SSR和CSR的优劣势" class="headerlink" title="总结SSR和CSR的优劣势"></a>总结SSR和CSR的优劣势</h3><table><thead><tr><th></th><th>优势</th><th>劣势</th></tr></thead><tbody><tr><td>SSR</td><td>1.搜索引擎可以抓取网站以获得更好的SEO <br> 2.初始页面加载速度更快 <br> 3.非常适合静态网站</td><td>1.频繁的服务器请求 <br> 2.真题缓慢的页面渲染 <br> 3.整个页面重新加载 <br> 4.不擅长于网站交互</td></tr><tr><td>CSR</td><td>1.擅于网站交互 <br> 2.初始加载后网站的渲染速度很快 <br> 3.非常适合Web应用程序 <br>4.可以运用强大的JavaScript处理和选择</td><td>1.不利于SEO <br> 2.初始加载可能需要花费更多时间</td></tr></tbody></table><hr><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul><li><p><a href="https://www.freecodecamp.org/news/what-exactly-is-client-side-rendering-and-hows-it-different-from-server-side-rendering-bd5c786b340d/" target="_blank" rel="noopener">Client-side vs. server-side rendering: why it’s not all black and white</a></p></li><li><p><a href="https://link.zhihu.com/?target=https%3A//medium.com/%40benjburkholder/javascript-seo-server-side-rendering-vs-client-side-rendering-bc06b8ca2383" target="_blank" rel="noopener">JavaScript SEO: Server Side Rendering vs. Client Side Rendering</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SSR和CSR&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="SSR" scheme="https://kisky3.github.io/tags/SSR/"/>
    
      <category term="CSR" scheme="https://kisky3.github.io/tags/CSR/"/>
    
  </entry>
  
  <entry>
    <title>About Gulp</title>
    <link href="https://kisky3.github.io/2019/12/08/gulp/"/>
    <id>https://kisky3.github.io/2019/12/08/gulp/</id>
    <published>2019-12-08T13:17:02.000Z</published>
    <updated>2020-04-18T09:22:32.439Z</updated>
    
    <content type="html"><![CDATA[<p>关于Gulp</p><a id="more"></a><h3 id="gulp是什么？"><a href="#gulp是什么？" class="headerlink" title="gulp是什么？"></a>gulp是什么？</h3><p>gulp是一个基于流的构建工具，可以自动执行指定的任务，简洁且高效。</p><hr><h3 id="gulp能做什么"><a href="#gulp能做什么" class="headerlink" title="gulp能做什么"></a>gulp能做什么</h3><p>1.开发环境下，想要能够按模块组织代码，监听实时变化<br>2.css/js预编译，postcss等方案，浏览器前缀自动补全等<br>3.条件输出不同的网页，比如app页面和mobile页面<br>4.线上环境下，我想要合并、压缩 html/css/javascritp/图片，减少网络请求，同时降低网络负担</p><hr><h3 id="安装gulp"><a href="#安装gulp" class="headerlink" title="安装gulp"></a>安装gulp</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g gulp     //全局安装</span><br><span class="line">npm install --save-dev gulp //安装到当前项目并在package.json中添加依赖</span><br></pre></td></tr></table></figure><hr><h3 id="核心API"><a href="#核心API" class="headerlink" title="核心API"></a>核心API</h3><h5 id="・gulp-task-task-name-deps-fn"><a href="#・gulp-task-task-name-deps-fn" class="headerlink" title="・gulp.task task(name[, deps], fn)"></a>・gulp.task task(name[, deps], fn)</h5><p>task()方法用于定义任务，传入名字、依赖任务数组、函数即可，gulp会先执行任务数组，结束后调用定义的函数，可以通过此手段控制任务的执行顺利。</p><p>例子：要定义一个任务build来执行css、js、imgs这三个任务，我们可以通过指定一个任务数组而不是函数来完成。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(&apos;build&apos;, [&apos;css&apos;, &apos;js&apos;, &apos;imgs&apos;]);</span><br></pre></td></tr></table></figure><hr><h5 id="・gulp-src-src-globs-options"><a href="#・gulp-src-src-globs-options" class="headerlink" title="・gulp.src src(globs[, options])"></a>・gulp.src src(globs[, options])</h5><p>src()方法输入一个glob或者glob数组，然后返回一个可以传递给插件的数据流</p><p>Gulp使用node-glob来从你指定的glob里面获取文件：</p><ul><li>app.js 精确匹配</li><li>*.js 能匹配js后缀的文件</li><li><em>*/</em>.js 能匹配多级目录下的js文件（也包含当前目录下）</li><li>!js/app.js 精确排除</li></ul><p>例子：js目录下包含了压缩和未压缩的js文件，我们想要压缩还没有被压缩的文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp.src([&apos;js/**/*.js&apos;, &apos;!js/**/*.min.js&apos;])</span><br></pre></td></tr></table></figure><hr><h5 id="・gulp-watch-watch-globs-opts-cb-or-watch-globs-opts-tasks"><a href="#・gulp-watch-watch-globs-opts-cb-or-watch-globs-opts-tasks" class="headerlink" title="・gulp.watch watch(globs[, opts], cb) or watch(globs[, opts], tasks)"></a>・gulp.watch watch(globs[, opts], cb) or watch(globs[, opts], tasks)</h5><p>watch()方法可以监听文件，它接受一个glob或者glob数组以及一个任务数组来执行回调<br>// 当templates目录下的模板文件发生变化，自动执行编译任务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(&apos;watch&apos;, function (event) &#123;</span><br><span class="line">  gulp.watch(&apos;templates/*.tmpl.html&apos;, [&apos;artTemplate&apos;]);</span><br><span class="line">  console.log(&apos;Event type: &apos; + event.type); // added, changed, or deleted   </span><br><span class="line">  console.log(&apos;Event path: &apos; + event.path); // The path of the modified file</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>1.package.json文件。它就是记录了我们使用了什么插件，以及版本号的记录的一个json文件而已。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"gulp"</span>: <span class="string">"^3.9.1"</span>,</span><br><span class="line">    <span class="string">"gulp-autoprefixer"</span>: <span class="string">"^3.1.0"</span>,</span><br><span class="line">    <span class="string">"gulp-concat"</span>: <span class="string">"^2.6.0"</span>,</span><br><span class="line">    <span class="string">"gulp-imagemin"</span>: <span class="string">"^3.0.1"</span>,</span><br><span class="line">    <span class="string">"gulp-jshint"</span>: <span class="string">"^2.0.1"</span>,</span><br><span class="line">    <span class="string">"gulp-less"</span>: <span class="string">"^3.1.0"</span>, <span class="comment">//例如这是处理LESS文件的，将LESS编译成.css文件</span></span><br><span class="line">    <span class="string">"gulp-minify-css"</span>: <span class="string">"^1.2.4"</span>,</span><br><span class="line">    <span class="string">"gulp-notify"</span>: <span class="string">"^2.2.0"</span>,</span><br><span class="line">    <span class="string">"gulp-rename"</span>: <span class="string">"^1.2.2"</span>,</span><br><span class="line">    <span class="string">"gulp-uglify"</span>: <span class="string">"^1.5.4"</span>,</span><br><span class="line">    <span class="string">"gulp-watch"</span>: <span class="string">"^4.3.8"</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>2.gulpfile.js文件<br>它就是告诉了gulp我们要将什么文件编译到什么文件下的XXX目录里面。例如在我的src目录里面存在一个css文件夹，里面装了很多css或者LESS等样式文件，我现在想通过gulp将它编译到dist目录下面的css文件夹里面并且这个css文件夹里的样式文件还是压缩过了。那么gulpfile.js就是起到了这样的一个作用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面我将自己的gulpfile.js文件的内容给你大家做做案例</span></span><br><span class="line"><span class="keyword">var</span> gulp=<span class="built_in">require</span>(<span class="string">'gulp'</span>); <span class="comment">//基础库</span></span><br><span class="line"><span class="keyword">var</span> less=<span class="built_in">require</span>(<span class="string">'gulp-less'</span>); <span class="comment">//编译less工具</span></span><br><span class="line"><span class="keyword">var</span> concat=<span class="built_in">require</span>(<span class="string">'gulp-concat'</span>); <span class="comment">//文件合并</span></span><br><span class="line"><span class="keyword">var</span> uglify=<span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);<span class="comment">//压缩JS文件</span></span><br><span class="line"><span class="comment">//首先require的意思就是从你的电脑里面加载某一个gulp的插件，例如require('gulp-less')</span></span><br><span class="line"><span class="comment">//请注意：加载这些插件需要你的电脑已经安装了这些插件，详情请百度，很简单也就是CMD两行命令的事情而已。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//配置文件路径</span></span><br><span class="line"><span class="keyword">var</span> paths=&#123;</span><br><span class="line">    src_html:<span class="string">"./src/**/*.html"</span>,  <span class="comment">//src_变量开头的是源文件的文件目录</span></span><br><span class="line">    src_less:<span class="string">"./src/css/**/*.less"</span>, <span class="comment">//less文件</span></span><br><span class="line">    src_css:<span class="string">"./src/css/**/*.css"</span>,  <span class="comment">//css文件</span></span><br><span class="line">    src_json:<span class="string">"./src/**/*.json"</span>,   <span class="comment">//json格式的文件</span></span><br><span class="line">    src_images:<span class="string">"src/images/**/*"</span>, </span><br><span class="line">    src_pic:<span class="string">"src/pic/**/*"</span>, <span class="comment">//它的意思是src文件下pic文件里面的所有格式的文件</span></span><br><span class="line">    src_js:<span class="string">"./src/js/**/*.js"</span>,</span><br><span class="line">    src_text:<span class="string">"./src/**/*.text"</span>,</span><br><span class="line"></span><br><span class="line">    dist:<span class="string">"./dist"</span>,    <span class="comment">//dist_变量开头的都是编译过后的文件目录</span></span><br><span class="line">    dist_css:<span class="string">"./dist/css"</span>,   <span class="comment">//dist文件夹下的css文件</span></span><br><span class="line">    dist_mincss:<span class="string">"./dist/mincss"</span>, <span class="comment">//dist文件夹下的mincss文件</span></span><br><span class="line">    dist_images:<span class="string">"dist/images"</span>,</span><br><span class="line">    dist_html:<span class="string">"./dist/**/*.html"</span>,</span><br><span class="line">    dist_pic:<span class="string">"dist/pic"</span>,</span><br><span class="line">    dist_js:<span class="string">"./dist/js"</span>,</span><br><span class="line">    dist_minjs:<span class="string">"./dist/minjs"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//style任务</span></span><br><span class="line">gulp.task(<span class="string">'styles'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="comment">//gulp.task就是告诉gulp要编译什么东西，并且使用什么样的处理方式，比如我这边就是编译less文件</span></span><br><span class="line">    gulp.src([paths.src_less])</span><br><span class="line">    .pipe(less())</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//然后输出编译文件到指定文件夹</span></span><br><span class="line">    .pipe(gulp.dest(paths.dist_css))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// HTML任务</span></span><br><span class="line">gulp.task(<span class="string">'html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  <span class="comment">//编译html文件</span></span><br><span class="line">    <span class="keyword">return</span> gulp.src([paths.src_html,paths.src_json,paths.src_text])</span><br><span class="line">    .pipe(gulp.dest(paths.dist))<span class="comment">//输出到指定文件夹</span></span><br><span class="line">    <span class="comment">//提醒任务完成</span></span><br><span class="line">    .pipe(notify(&#123; <span class="attr">message</span>: <span class="string">'html,json,text is OK'</span> &#125;))</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'scripts'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//编译js文件内容，诸如此类，你也可以创建其他的任务，比如images</span></span><br><span class="line">    <span class="keyword">return</span> gulp.src([paths.src_js])</span><br><span class="line">    .pipe(gulp.dest(paths.dist_js)) <span class="comment">//输出到指定文件夹</span></span><br><span class="line">    .pipe(notify(&#123; <span class="attr">message</span>: <span class="string">'Scripts is OK'</span> &#125;)) <span class="comment">//提醒任务完成</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>监听文件变化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面的这段代码是gulpfile.js最后的一点的代码，他的作用就是去监听哪一个文件发生了变化，然后好把它编译到dist的文件夹内</span></span><br><span class="line"><span class="comment">//监听文档</span></span><br><span class="line">gulp.task(<span class="string">'watch'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//监听less,sass,css</span></span><br><span class="line">    gulp.watch([paths.src_less,paths.src_css],[<span class="string">'styles'</span>, <span class="string">'html'</span>])</span><br><span class="line">    <span class="comment">//监听js</span></span><br><span class="line">    gulp.watch([paths.src_js],[<span class="string">'scripts'</span>])</span><br><span class="line">    <span class="comment">//监听图片</span></span><br><span class="line">    gulp.watch([paths.src_images],[<span class="string">'images'</span>])</span><br><span class="line">    <span class="comment">//监听hhtml,json,text</span></span><br><span class="line">    gulp.watch([paths.src_html,paths.src_json,paths.src_text], <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      gulp.run(<span class="string">'html'</span>)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>然后cmd中输入gulp watch就是监听的意思，然后就OK了。<br>现在你在src文件目录中修改了什么文件，就会编译到dist文件中，gulp有很多的好处，比如处理CSS预编译语言，压缩，或者将EC6编译成EC5都是很好的！</p><hr><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://ics.media/entry/3290/" target="_blank" rel="noopener">絶対つまずかないGulp 4入門（2019年版）<br>インストールとSassを使うまでの手順</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;关于Gulp&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="Gulp" scheme="https://kisky3.github.io/tags/Gulp/"/>
    
  </entry>
  
  <entry>
    <title>About Nuxt Router and Params</title>
    <link href="https://kisky3.github.io/2019/12/08/AboutNuxtRouter/"/>
    <id>https://kisky3.github.io/2019/12/08/AboutNuxtRouter/</id>
    <published>2019-12-08T11:33:18.000Z</published>
    <updated>2020-04-18T09:22:32.014Z</updated>
    
    <content type="html"><![CDATA[<p>关于Nuxt路由设置及传参</p><a id="more"></a><p>首先在pages路径下建立about.vue，news.vue，和index.vue文件，并在index.vue里引用三个link<br><br><br><img src="./1.png" style="width: 500px"></p><p>运行打开页面可以发现路由生效，并可以通过a标签进行跳转。</p><p>下面我们利用nuxt的写法，将a标签写成下面的形式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;nuxt-link :to = &quot;&#123;name: &apos;index&apos;&#125;&quot;&gt;HOME&lt;/nuxt-link&gt;</span><br></pre></td></tr></table></figure><img src="./2.png" style="width: 500px"><p>打开画面验证，效果是一样的。</p><p>下面进行画面间的传参。在给news的link上传一个参数params的对象，newsId = 3306</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;nuxt-link :to = &quot;&#123;name: &apos;news&apos;, params:&#123;newsId:3306&#125;&#125;&quot;&gt;HOME&lt;/nuxt-link&gt;</span><br></pre></td></tr></table></figure><img src="./3.png" style="width: 500px">然后在news.vue里接受参数，并显示。在这里是使用双花括号进行显示，也可以通过js里进行设置之后再显示。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;$router.params.newsId&#125;&#125;</span><br></pre></td></tr></table></figure><img src="./4.png" style="width: 500px"><p>运行，打开页面，发现传递的参数newsId已经被news页面接受到并成功显示了。<br><br><br><img src="./5.png" style="width: 500px"></p><p>以上!！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;关于Nuxt路由设置及传参&lt;/p&gt;
    
    </summary>
    
      <category term="Front-end Knowledge" scheme="https://kisky3.github.io/categories/Front-end-Knowledge/"/>
    
    
      <category term="Nuxt.js" scheme="https://kisky3.github.io/tags/Nuxt-js/"/>
    
      <category term="Router" scheme="https://kisky3.github.io/tags/Router/"/>
    
  </entry>
  
  <entry>
    <title>Set Nuxt.js Options</title>
    <link href="https://kisky3.github.io/2019/12/08/howtomodifynuxtserverstartport/"/>
    <id>https://kisky3.github.io/2019/12/08/howtomodifynuxtserverstartport/</id>
    <published>2019-12-08T09:47:03.000Z</published>
    <updated>2020-04-18T09:22:32.440Z</updated>
    
    <content type="html"><![CDATA[<p>Nuxt.js常用配置</p><a id="more"></a><h3 id="如何更改Nuxt默认端口号"><a href="#如何更改Nuxt默认端口号" class="headerlink" title="如何更改Nuxt默认端口号"></a>如何更改Nuxt默认端口号</h3><p>我们知道Nuxt项目运行的默认端口是localhost:3000,<br>但是有时候我们需要多个项目同时运行，那么一个端口必然不够用，那么我们如何去修改项目的本地运行端口呢。</p><p>如果你已经启动运行了一个nuxt项目<br>在不更改本地运行端口的情况下就会出现如下错误：</p> <img src="./1.png" style="width:500px"><p>更改项目的本地运行端口很简单<br>只需要在项目的package.json文件中做出相关配置就可以了。</p><p>更改之前package.json的配置:<br> <img src="./2.png" style="width:500px"></p><p> 在package.json中增加config的相关配置，如下图所示:</p><img src="./3.png" style="width:500px"><p>运行:<br><img src="./4.png" style="width:500px"></p><p>可以看到端口号已经修改成功了！</p><hr><h3 id="配置全局css"><a href="#配置全局css" class="headerlink" title="配置全局css"></a>配置全局css</h3><p>比如在asset下创建css文件夹，并创建全局css normalize.css<br><img src="./5.png" style="width:500px"><br><br><br>然后在nuxt.config.js设置文件里添加css全局设置选项。~就是代表根目录。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">css:[&apos;~asset/css/normalize.css&apos;],</span><br></pre></td></tr></table></figure><img src="./6.png" style="width:500px">]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Nuxt.js常用配置&lt;/p&gt;
    
    </summary>
    
      <category term="System Setting" scheme="https://kisky3.github.io/categories/System-Setting/"/>
    
    
      <category term="Nuxt.js" scheme="https://kisky3.github.io/tags/Nuxt-js/"/>
    
      <category term="package.json" scheme="https://kisky3.github.io/tags/package-json/"/>
    
      <category term="port" scheme="https://kisky3.github.io/tags/port/"/>
    
      <category term="css" scheme="https://kisky3.github.io/tags/css/"/>
    
      <category term="nuxt.config.js" scheme="https://kisky3.github.io/tags/nuxt-config-js/"/>
    
  </entry>
  
  <entry>
    <title>Connect Mysql8.0.14 Container To Sequel</title>
    <link href="https://kisky3.github.io/2019/12/08/ConnectMysql8-0-14ContainerToSequel/"/>
    <id>https://kisky3.github.io/2019/12/08/ConnectMysql8-0-14ContainerToSequel/</id>
    <published>2019-12-07T15:57:08.000Z</published>
    <updated>2020-04-18T09:22:32.044Z</updated>
    
    <content type="html"><![CDATA[<p>将Mysql 8.0.14容器连接到Sequel Pro</p><a id="more"></a><h3 id="启动一个Mysql容器"><a href="#启动一个Mysql容器" class="headerlink" title="启动一个Mysql容器"></a>启动一个Mysql容器</h3><p>首先本地建造一个测试用的mysql容器,为了避免使用重复端口号，这里设置为4306。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name test_mysql -v ~/docker/mysql/conf:/etc/mysql/conf.d -v mysql-datavolume:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root -e MYSQL_USER=root -e MYSQL_DATABASE=test -p 4306:3306 mysql:8.0.14 --default-authentication-plugin=mysql_native_password</span><br></pre></td></tr></table></figure><p>出现[Server] /usr/sbin/mysqld: ready for connections的log就说明应该启动了Mysql8.0.14的容器了。</p><hr><h3 id="连接启动好的docker容器"><a href="#连接启动好的docker容器" class="headerlink" title="连接启动好的docker容器"></a>连接启动好的docker容器</h3><p>分别试试以下途径连接，看看能否成功连接上容器。</p><ul><li>docker</li><li>ローカル</li><li>Sequel Pro</li></ul><h5 id="1-使用docker进入容器"><a href="#1-使用docker进入容器" class="headerlink" title="1.使用docker进入容器"></a>1.使用docker进入容器</h5><p>1.使用exec命令行进入容器，容器名为test_mysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it test_mysql bash</span><br></pre></td></tr></table></figure><p>显示如下则表示连接成功：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@cf28f18b8a08:/#</span><br></pre></td></tr></table></figure><p>测试一下我们的容器参数是否设置成功了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@cf28f18b8a08:/# printenv</span><br></pre></td></tr></table></figure><p>显示如下，设置成功。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HOSTNAME=cf28f18b8a08</span><br><span class="line">MYSQL_DATABASE=test</span><br><span class="line">MYSQL_ROOT_PASSWORD=root</span><br><span class="line">PWD=/</span><br><span class="line">HOME=/root</span><br><span class="line">MYSQL_MAJOR=8.0</span><br><span class="line">GOSU_VERSION=1.7</span><br><span class="line">MYSQL_USER=root</span><br><span class="line">MYSQL_VERSION=8.0.14-1debian9</span><br><span class="line">TERM=xterm</span><br><span class="line">SHLVL=1</span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line">_=/usr/bin/printenv</span><br></pre></td></tr></table></figure><p>2.在容器内连接Mysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@cf28f18b8a08:/# mysql -u root -p</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 11</span><br><span class="line">Server version: 8.0.14 MySQL Community Server - GPL</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>连接成功，可以在容器内进行Mysql的操作了。</p><hr><h5 id="2-本地连接"><a href="#2-本地连接" class="headerlink" title="2.本地连接"></a>2.本地连接</h5><p>使用本地的Mysql连接容器内的Mysql（首先确保本地Mysql安装完毕）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p -h 127.0.0.1 --port 4306</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 9</span><br><span class="line">Server version: 8.0.14 MySQL Community Server - GPL</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; exit</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><p>本地连接成功！</p><hr><h5 id="3-从Sequel-Pro进行连接"><a href="#3-从Sequel-Pro进行连接" class="headerlink" title="3.从Sequel Pro进行连接"></a>3.从Sequel Pro进行连接</h5><p>输入信息后发现Sequel Pro出现了下面的错误导致无法连接：<br><img src="./1.png" style="width:500px"></p><p>这是因为Mysql8.0系对登陆密码的认证方法更新了。<br>为了解除错误，要将root用户的插件修改成mysql_native_password。</p><p>首先要在本地连接docker容器内的Mysql，并确认目前user的情况</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT user, host, plugin FROM mysql.user;</span><br><span class="line">+------------------+-----------+-----------------------+</span><br><span class="line">| user             | host      | plugin                |</span><br><span class="line">+------------------+-----------+-----------------------+</span><br><span class="line">| root             | %         | caching_sha2_password |</span><br><span class="line">| mysql.infoschema | localhost | caching_sha2_password |</span><br><span class="line">| mysql.session    | localhost | caching_sha2_password |</span><br><span class="line">| mysql.sys        | localhost | caching_sha2_password |</span><br><span class="line">| root             | localhost | caching_sha2_password |</span><br><span class="line">+------------------+-----------+-----------------------+</span><br><span class="line">5 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure><p>可以看到所有的插件（plugin）都被设定为caching_sha2_password，总之为了连接Sequel Pro，我们要将root用户的插件修改成mysql_native_password。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER &apos;root&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;root&apos;;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure><p>修改成功后再次确认状态</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT user, host, plugin FROM mysql.user;</span><br><span class="line">+------------------+-----------+-----------------------+</span><br><span class="line">| user             | host      | plugin                |</span><br><span class="line">+------------------+-----------+-----------------------+</span><br><span class="line">| root             | %         | mysql_native_password |</span><br><span class="line">| mysql.infoschema | localhost | caching_sha2_password |</span><br><span class="line">| mysql.session    | localhost | caching_sha2_password |</span><br><span class="line">| mysql.sys        | localhost | caching_sha2_password |</span><br><span class="line">| root             | localhost | caching_sha2_password |</span><br><span class="line">+------------------+-----------+-----------------------+</span><br><span class="line">5 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure><p>可以看到plugin已经被修改成功了。<br>再试着连接Sequel Pro看看<br><img src="./1.png" style="width:500px"></p><p>以上 成功！</p><hr><h3 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h3><p>在本地安装完Mysql的时候，输入mysql -u root -p会出现：zsh: command not found: mysql的提示。<br>此时需要配置环境变量。</p><p>解决方法：</p><p>a.打开终端,输入： cd ~</p><p>b.输入：sudo vim .bash_profile</p><p>回车执行，需要输入root用户密码。sudo是使用root用户修改环境变量文件。</p><p>c.输入i进入编辑模式，然后输入：export PATH=${PATH}:/usr/local/mysql/bin</p><p>然后esc退出insert状态，并在最下方输入:wq保存退出。</p><p>d.输入：source .bash_profile</p><p>回车执行，运行环境变量。</p><p>e.vi ~/.zshrc，在这里面添加了：</p><p>export PATH=${PATH}:/usr/local/mysql/bin</p><p>保存后 source ~/.zshrc</p><p>f.执行命令：mysql -u root -p即可</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;将Mysql 8.0.14容器连接到Sequel Pro&lt;/p&gt;
    
    </summary>
    
      <category term="System Setting" scheme="https://kisky3.github.io/categories/System-Setting/"/>
    
    
      <category term="Mysql" scheme="https://kisky3.github.io/tags/Mysql/"/>
    
      <category term="Sequel Pro" scheme="https://kisky3.github.io/tags/Sequel-Pro/"/>
    
  </entry>
  
</feed>
