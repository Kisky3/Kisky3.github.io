---
title: Create A Login&Register Modal With Rotation Animation
date: 2019-04-20 20:09:27
tags:
- CSS
clearReading: true
coverCaption: "Hello World, Hello Programming"
coverSize: partial
comments: false
categories: Front-end Knowledge
---

实现一个翻转注册登陆页面
<!--more-->

### 使用语言为CSS和原生JS
大致思路如下：

1.创造两个模态框，一个为login，一个为register.

{% hl_text #FFCCCC %}
HTML
{% endhl_text %}

```HTML
<main>
  <div class="flip-modal login">
    /* 登陆模态框 */
    <div class="modal modal-login"></div>

    /* 注册模态框 */
     <div class="modal modal-login"></div>
  </div>
</main>
```

***

2.并使用JS来控制flip-modal下的class为login或者register.

{% hl_text #FFCCCC %}
JS
{% endhl_text %}

```HTML
$('.flip-modal').addEventListener('click', function(e){
  e.stopPropagation();
  if(e.target.classList.contains('login')){
    $('.flip-modal').classList.remove('register');
    $('.flip-modal').classList.add('login');
  }
  
  if(e.target.classList.contains('register')){
    $('.flip-modal').classList.add('register');
    $('.flip-modal').classList.remove('login');
  }
  
  if(e.target.classList.contains('close')){
    $('.flip-modal').style.display = 'none';
  }
});
```

***

3.CSS控制模态框翻转时,根据flip-modal下的class类型进行两个模态框的水平Y轴翻转，并隐藏翻转后的背面.
加上transition的过渡效果使翻转更自然。

```JS
.flip-modal.login .modal-login,
.flip-modal.register .modal-register {
  transform: translate(-50%,-50%) rotateY(0deg);
  backface-visibility: hidden;
  transition: all 1s;
}

.flip-modal.login .modal-register,
.flip-modal.register .modal-login {
  transform: translate(-50%,-50%) rotateY(180deg);
  backface-visibility: hidden;
  transition: all 1s;
}
```

***

### 效果图如下

<img src="./1.png" style="width:500px">

[代码预览地址](http://js.jirengu.com/xukec/43/edit?html,css,js])

***

### 完整代码

{% hl_text #FFCCCC %}
HTML
{% endhl_text %}

```HTML
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Login|Regist</title>
  <link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css">
</head>
<body>
<main>
  <header>
    <a class="login" href="#">
      <i class="fa fa-user-circle"></i>
    </a>
  </header>
  <div class="flip-modal login">
    <div class="modal modal-login">
      <a class="close fa fa-close" href="#"></a>
      <div class="tabs">
        <a href="#" class="login active">登录</a>
        <a href="#" class="register">注册</a>
      </div>
      <div class="content">
        <div class="errormsg"></div>
        <form action="/login" method="post">
          <div class="input-field">
            <i class="fa fa-user-o"></i>
            <input name="username" type="text" placeholder="用户名">
          </div>
          <div class="input-field">
            <i class="fa fa-lock"></i>
            <input name="password" type="password" placeholder="密码">
          </div>
          <div class="input-field">
            <input type="submit" value="登录">
          </div>
        </form>
      </div>
    </div>

    <div class="modal modal-register">
      <a class="close fa fa-close" href="#"></a>
      <div class="tabs">
        <a href="#" class="login">登录</a>
        <a href="#" class="register active">注册</a>
      </div>
      <div class="content">
        <div class="errormsg"></div>
        <form action="/login" method="post">
          <div class="input-field">
            <i class="fa fa-user-o"></i>
            <input name="username" type="text" placeholder="用户名">
          </div>
          <div class="input-field">
            <i class="fa fa-lock"></i>
            <input name="password" type="password" placeholder="密码">
          </div>
          <div class="input-field">
            <i class="fa fa-lock"></i>
            <input name="password2" type="password" placeholder="再次输入密码">
          </div>
          <div class="input-field">
            <input type="submit" value="注册">
          </div>
        </form>
      </div>
    </div>
  </div>
</main>
</body>
</html>
```
{% hl_text #FFCCCC %}
JS
{% endhl_text %}

```JS
function $(selector){
  return document.querySelector(selector);
}

function $$(selector){
  return document.querySelectorAll(selector);
}

$('header .login').onclick = function(e){
  e.stopPropagation();
  $('.flip-modal').style.display = 'block';
};

$('.flip-modal').addEventListener('click', function(e){
  e.stopPropagation();
  if(e.target.classList.contains('login')){
    $('.flip-modal').classList.remove('register');
    $('.flip-modal').classList.add('login');
  }
  
  if(e.target.classList.contains('register')){
    $('.flip-modal').classList.add('register');
    $('.flip-modal').classList.remove('login');
  }
  
  if(e.target.classList.contains('close')){
    $('.flip-modal').style.display = 'none';
  }
});

document.addEventListener ('click',function(){
  $('.flip-modal').style.display = 'none';
});

$('.modal-login form').addEventListener('submit',function(e){
  e.preventDefault();
  if(!/^\w{3,8}$/.test($('.modal-login input[name=username]').value)){
    $('.modal-login .errormsg').innerText = '用户名需要输入3-8个字符，包括字母数字和下划线';
    return false;
  }
  
  if(!/^\w{6,10}$/.test($('.modal-login input[name=password]').value)){
    $('.modal-login .errormsg').innerText = '密码需要输入6-10个字符，包括字母数字和下划线';
    return false;
  }
  this.submit();
});

$('.modal-register form').addEventListener('submit',function(e){
  e.preventDefault();
  if(!/^\w{3,8}$/.test($('.modal-register input[name=username]').value)){
    $('.modal-register .errormsg').innerText = '用户名需要输入3-8个字符，包括字母数字和下划线';
    return false;
  }
  
  if(!/^\w{6,10}$/.test($('.modal-register input[name=password]').value)){
    $('.modal-register .errormsg').innerText = '密码需要输入6-10个字符，包括字母数字和下划线';
    return false;
  }
 
    if($('.modal-register input[name = password]').value != $('.modal-register input[name = password2]').value){
    $('.modal-register .errormsg').innerText = '两次密码输入不一致';
    return false;
  }
  this.submit();
});
```
{% hl_text #FFCCCC %}
CSS
{% endhl_text %}

```CSS
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body, main {
  height: 100%;
}

body {
  font: 14px/1.5 Arial;
}

a {
  text-decoration: none;
  color: #444;
}

main {
  background: linear-gradient(to right top, rgba(38,50,105,0.78), rgba(255,152,0,0.45)), url("http://n.sinaimg.cn/sinacn20111/348/w690h458/20190317/95f8-hukwxnu7092764.jpg") center center no-repeat;
}

herder {
  position: absolute;
  top: 10px;
  width: 100%;
}

header .login {
  float: right;
  margin-right: 20px;
  font-size: 20px;
}

.flip-modal {
  display: none;
}

.show-modal {
  display: block!important;
}

.modal {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  padding: 16px;
  background-color: #fff;
  box-shadow: 0 3px 4px 5px rgba(0,0,0,0.2);
}

.modal .close {
  position: absolute;
  right: 10px;
  top: 10px;
}

.modal .tabs {
  text-align: center;
}

.modal .tabs a {
  display: inline-block;
  font-size: 16px;
  margin: 0 10px;
  color: #666;
}

.modal .tabs a.active {
  border-bottom: 2px solid #444;
  color: #444;
}

.modal .content {
  padding: 20px 40px;
}

.modal .errormsg {
  color: #ff9800;
  font-size: 12px;
}

.modal .content .input-field {
  position: relative;
  margin-top: 10px;
}

.modal .content .input-field .fa {
  position: absolute;
  left: 13px;
  top: 13px;
}

.modal .content input[type=text],
.modal .content input[type=password] {
  width: 100%;
  padding: 10px 10px 10px 28px;
  outline: none;
}

.modal .content input[type=submit] {
  padding: 6px 10px;
  border: none;
  background: #fff;
  box-shadow: 0 0 2px rgba(0,0,0,0.4);
  outline: none;
}

.flip-modal.login .modal-login,
.flip-modal.register .modal-register {
  transform: translate(-50%,-50%) rotateY(0deg);
  backface-visibility: hidden;
  transition: all 1s;
}

.flip-modal.login .modal-register,
.flip-modal.register .modal-login {
  transform: translate(-50%,-50%) rotateY(180deg);
  backface-visibility: hidden;
  transition: all 1s;
}
```

